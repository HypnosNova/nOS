var FLIPBOOK = FLIPBOOK || {}; {
	(function(t, n, r, i) {
		t.fn.flipBook = function(e) {
			return this.each(function() {
				var t = new s;
				t.init(e, this)
			})
		};
		t.fn.flipBook.options = {
			pdfUrl: "",
			rightToLeft: false,
			pages: [],
			rootFolder: "",
			assets: {
				preloader: "images/preloader.jpg",
				left: "images/left.png",
				overlay: "images/overlay.jpg"
			},
			startPage: 1,
			pageWidth: 900,
			pageHeight: 1200,
			thumbnailWidth: 100,
			thumbnailHeight: 141,
			currentPage: {
				enabled: true,
				title: "Current page"
			},
			btnNext: {
				enabled: true,
				title: "Next page",
				icon: "fa-chevron-right"
			},
			btnPrev: {
				enabled: true,
				title: "Previous page",
				icon: "fa-chevron-left"
			},
			btnZoomIn: {
				enabled: true,
				title: "Zoom in",
				icon: "fa-plus"
			},
			btnZoomOut: {
				enabled: true,
				title: "Zoom out",
				icon: "fa-minus"
			},
			btnToc: {
				enabled: true,
				title: "Table of content",
				icon: "fa-list-ol"
			},
			btnThumbs: {
				enabled: true,
				title: "Pages",
				icon: "fa-th-large"
			},
			btnShare: {
				enabled: true,
				title: "Share",
				icon: "fa-link"
			},
			btnDownloadPages: {
				enabled: true,
				title: "Download pages",
				icon: "fa-download",
				url: "images/pages.zip"
			},
			btnDownloadPdf: {
				enabled: true,
				title: "Download PDF",
				icon: "fa-file",
				url: "images/pages.pdf"
			},
			btnExpand: {
				enabled: true,
				title: "Toggle fullscreen",
				icon: "fa-expand"
			},
			flipType: "3d",
			zoom: .4,
			zoomMin: .4,
			zoomMax: 6,
			time1: 1000,
			transition1: "easeInSine",
			time2: 1200,
			transition2: "easeOutSine",
			social: [{
				name: "facebook",
				icon: "fa-facebook",
				url: "http://codecanyon.net"
			}, {
				name: "twitter",
				icon: "fa-twitter",
				url: "http://codecanyon.net"
			}, {
				name: "googleplus",
				icon: "fa-google-plus",
				url: "http://codecanyon.net"
			}, {
				name: "linkedin",
				icon: "fa-linkedin",
				url: "http://codecanyon.net"
			}, {
				name: "youtube",
				icon: "fa-youtube",
				url: "http://codecanyon.net"
			}],
			lightBox: false,
			lightBoxOpened: false,
			lightboxTransparent: true,
			lightboxPadding: 0,
			lightboxMargin: 20,
			lightboxWidth: "75%",
			lightboxHeight: 600,
			lightboxMinWidth: 400,
			lightboxMinHeight: 100,
			lightboxMaxWidth: 9999,
			lightboxMaxHeight: 9999,
			lightboxAutoSize: true,
			lightboxAutoHeight: false,
			lightboxAutoWidth: false,
			webgl: true,
			renderer: "webgl",
			cameraDistance: 2500,
			pan: 0,
			panMax: 90,
			panMin: -90,
			tilt: 0,
			tiltMax: 60,
			tiltMin: -60,
			bookX: 0,
			bookY: 0,
			bookZ: 0,
			pageMaterial: "phong",
			pageShadow: true,
			pageHardness: 1,
			coverHardness: 9,
			pageSegmentsW: 10,
			pageSegmentsH: 1,
			pageShininess: 1,
			pageFlipDuration: 1.5,
			pointLight: true,
			pointLightX: 0,
			pointLightY: 200,
			pointLightZ: 1500,
			pointLightColor: 16777215,
			pointLightIntensity: .04,
			directionalLight: false,
			directionalLightX: 0,
			directionalLightY: 0,
			directionalLightZ: 2e3,
			directionalLightColor: 16777215,
			directionalLightIntensity: .01,
			ambientLight: true,
			ambientLightColor: 16777215,
			ambientLightIntensity: 1,
			spotLight: false,
			spotLightX: 0,
			spotLightY: 0,
			spotLightZ: 5e3,
			spotLightColor: 16777215,
			spotLightIntensity: .2,
			spotLightShadowCameraNear: .1,
			spotLightShadowCameraFar: 1e4,
			spotLightCastShadow: true,
			spotLightShadowDarkness: .5,
			skin: "light",
			contentOnStart: false,
			thumbnailsOnStart: false
		};
		var s = function() {};
		s.prototype = {
			init: function(e, i) {
				var s = this;
				s.elem = i;
				s.jQueryelem = t(i);
				s.options = {};
				var o = r.createElement("div").style,
					u = function() {
						var e = "t,webkitT,MozT,msT,OT".split(","),
							t, n = 0,
							r = e.length;
						for (; n < r; n++) {
							t = e[n] + "ransform";
							if (t in o) {
								return e[n].substr(0, e[n].length - 1)
							}
						}
						return false
					}(),
					a = function(e) {
						if (u === "") return e;
						e = e.charAt(0).toUpperCase() + e.substr(1);
						return u + e
					},
					f = /android/gi.test(navigator.appVersion),
					l = /iphone|ipad/gi.test(navigator.appVersion),
					c = /hp-tablet/gi.test(navigator.appVersion),
					h = a("perspective") in o,
					p = "ontouchstart" in n && !c,
					d = "onorientationchange" in n ? "orientationchange" : "resize",
					v = p ? "touchend" : "click",
					m = p ? "touchstart" : "mousedown",
					g = p ? "touchmove" : "mousemove",
					y = p ? "touchend" : "mouseup",
					b = p ? "touchcancel" : "mouseup",
					w = a("transform"),
					E = a("perspective"),
					S = a("transition"),
					x = a("transitionProperty"),
					T = a("transitionDuration"),
					N = a("transformOrigin"),
					C = a("transformStyle"),
					k = a("transitionTimingFunction"),
					L = a("transitionDelay"),
					A = a("backfaceVisibility");
				s.has3d = h;
				s.hasWebGl = Detector.webgl;
				s.hasTouch = p;
				s.RESIZE_EV = d;
				s.CLICK_EV = v;
				s.START_EV = m;
				s.MOVE_EV = g;
				s.END_EV = y;
				s.CANCEL_EV = b;
				s.transform = w;
				s.transitionProperty = x;
				s.transitionDuration = T;
				s.transformOrigin = N;
				s.transitionTimingFunction = k;
				s.transitionDelay = L;
				s.perspective = E;
				s.transformStyle = C;
				s.transition = S;
				s.backfaceVisibility = A;
				s.options = t.extend({}, t.fn.flipBook.options, e);
				s.options.main = s;
				s.p = true;
				s.pages = s.options.pages;
				s.wrapper = t(r.createElement("div")).addClass("main-wrapper");
				s.bookLayer = t(r.createElement("div")).addClass("flipbook-bookLayer").appendTo(s.wrapper);
				s.bookLayer[0].style[s.transformOrigin] = "100% 100%";
				s.book = t(r.createElement("div")).addClass("book").appendTo(s.bookLayer);
				if (s.options.lightBox) {
					s.lightbox = new FLIPBOOK.Lightbox(this, s.wrapper, s.options);
					if (s.options.lightboxTransparent == true) {
						s.wrapper.css("background", "none");
						s.bookLayer.css("background", "none");
						s.book.css("background", "none")
					}
				} else {
					s.wrapper.appendTo(s.jQueryelem);
					s.start();
					if (s.options.contentOnStart) s.toggleToc(true);
					if (s.options.thumbnailsOnStart) s.toggleThumbs(true)
				} if (s.options.pdfUrl != "") {
					PDFJS.disableWorker = true;
					PDFJS.getDocument(s.options.pdfUrl).then(function(e) {
						s.onPdfOpen(e)
					})
				} else {}
				$("span[title='Previous page']").text("←");
				$("span[title='Next page']").text("→");
				$("span[title='Zoom in']").text("+");
				$("span[title='Zoom out']").text("-");
				$("span[title='Table of content']").text("L");
				$("span[title='Pages']").text("■");
				$("span[title='Share']").css("display","none");
				$("span[title='Download pages']").css("display","none");
				$("span[title='Download PDF']").css("display","none");
				$("span[title='Toggle fullscreen']").text("□");
			},
			start: function() {
				this.started = true;
				var e = this;
				if (e.options.rightToLeft) {
					e.pagesReversed = [];
					for (var n = e.options.pages.length - 1; n >= 0; n--) {
						e.pagesReversed.push(e.options.pages[n])
					}
					e.options.pages = e.pagesReversed
				}
				e.options.onTurnPageComplete = e.onTurnPageComplete;
				if (!e.has3d) e.options.flipType = "2d";
				this.createBook();
				this.Book.updateVisiblePages();
				this.createToc();
				this.createThumbs();
				this.createMenu();
				if (this.options.currentPage.enabled) {
					this.createCurrentPage();
					this.updateCurrentPage()
				}
				if (this.options.btnShare) this.createShareButtons();
				this.resize();
				if (e.options.lightBox) e.Book.disable();
				t(".skin-color-bg").addClass("flipbook-bg-" + this.options.skin);
				t(".skin-color").addClass("flipbook-color-" + this.options.skin)
			},
			onPdfOpen: function(e) {
				var t = this;
				t.pdfDocument = e;
				t.loadPageFromPdf(0, t.start)
			},
			loadPageFromPdf: function(e, t) {
				function c(e) {
					var t = e.toDataURL();
					n.pages[0].src = t
				}
				var n = this;
				var i = n.pdfDocument;
				var s = i.pdfInfo,
					o = s.numPages,
					u, a = 1.5;
				var f = r.createElement("canvas");
				var u = f.getContext("2d");
				var l = new Array;
				i.getPage(e + 1).then(function(r) {
					var i = r.getViewport(a);
					f.width = i.width;
					f.height = i.height;
					var s = r.render({
						canvasContext: u,
						viewport: i
					});
					var o = s.internalRenderTask.callback;
					s.internalRenderTask.callback = function(e) {
						o.call(this, e);
						c(f);
						t.call(n)
					};
					u.clearRect(0, 0, f.width, f.height)
				})
			},
			createBook: function() {
				var e = this;
				if (e.options.webgl && e.hasWebGl) {
					var i = e.options;
					i.pagesArr = e.options.pages;
					i.scroll = e.scroll;
					i.parent = e;
					e.Book = new FLIPBOOK.BookWebGL(e.book[0], i);
					e.webglMode = true
				} else {
					e.Book = new FLIPBOOK.Book(e.book[0], e.options);
					e.scroll = new iScroll(e.bookLayer[0], {
						wheelAction: "zoom",
						zoom: true,
						zoomMin: e.options.zoomMin,
						zoomMax: e.options.zoomMax,
						keepInCenterH: true,
						keepInCenterV: true,
						bounce: true
					});
					e.webglMode = false
				} if (e.options.rightToLeft) {
					e.Book.goToPage(Number(e.options.pages.length), true)
				} else {
					e.Book.goToPage(Number(e.options.startPage) - 1)
				}
				t(n).resize(function() {
					e.resize()
				});
				r.onkeydown = function(t) {
					t = t || n.event;
					switch (t.keyCode) {
						case 37:
							e.Book.prevPage();
							break;
						case 38:
							e.zoomIn();
							break;
						case 39:
							e.Book.nextPage();
							break;
						case 40:
							e.zoomOut();
							break
					}
				}
			},
			createButton: function(e) {
				return t(r.createElement("span")).attr("aria-hidden", "true").appendTo(this.menu).addClass(e.icon).addClass("flipbook-icon-general flipbook-menu-btn skin-color fa").attr("title", e.title)
			},
			createMenu: function() {
				//if (this.p && this.options.pages.length != 26 && this.options.pages.length != 16 && this.options.pages.length != 8 && this.options.pages.length != 192) return;
				var e = this;
				this.menuWrapper = t(r.createElement("div")).addClass("flipbook-menuWrapper").appendTo(this.wrapper);
				this.menu = t(r.createElement("div")).addClass("flipbook-menu").addClass("skin-color-bg").appendTo(this.menuWrapper);
				if (this.options.lightboxTransparent) {}
				if (e.options.btnPrev.enabled) this.btnPrev = this.createButton(e.options.btnPrev).bind(this.CLICK_EV, function() {
					e.Book.prevPage()
				});
				if (e.options.btnNext.enabled) this.btnNext = this.createButton(e.options.btnNext).bind(this.CLICK_EV, function() {
					e.Book.nextPage()
				});
				if (e.options.btnZoomIn.enabled) this.btnZoomIn = this.createButton(e.options.btnZoomIn).bind(this.CLICK_EV, function() {
					e.zoomIn()
				});
				if (e.options.btnZoomOut.enabled) this.btnZoomOut = this.createButton(e.options.btnZoomOut).bind(this.CLICK_EV, function() {
					e.zoomOut()
				});
				if (e.options.btnToc.enabled) this.btnToc = this.createButton(e.options.btnToc).bind(this.CLICK_EV, function() {
					e.toggleToc()
				});
				if (e.options.btnThumbs.enabled) this.btnThumbs = this.createButton(e.options.btnThumbs).bind(this.CLICK_EV, function() {
					e.toggleThumbs()
				});
				if (e.options.btnShare.enabled) this.btnShare = this.createButton(e.options.btnShare).bind(this.CLICK_EV, function() {
					e.toggleShare()
				});
				if (e.options.btnDownloadPages.enabled) this.btnDownloadPages = this.createButton(e.options.btnDownloadPages).bind(this.CLICK_EV, function() {
					n.location = e.options.btnDownloadPages.url
				});
				if (e.options.btnDownloadPdf.enabled) this.btnDownloadPdf = this.createButton(e.options.btnDownloadPdf).bind(this.CLICK_EV, function() {
					n.location = e.options.btnDownloadPdf.url
				});
				if (THREEx.FullScreen.available() && e.options.btnExpand.enabled) {
					this.btnExpand = this.createButton(e.options.btnExpand).bind(this.CLICK_EV, function() {
						if (THREEx.FullScreen.available()) {
							if (THREEx.FullScreen.activated()) {
								THREEx.FullScreen.cancel();
								t(this).addClass("fa-expand").removeClass("fa-compress")
							} else {
								THREEx.FullScreen.request(e.wrapper[0]);
								t(this).addClass("fa-compress").removeClass("fa-expand")
							}
						}
					})
				}
			},
			createShareButtons: function() {
				function s(i) {
					var s = t(r.createElement("span")).attr("aria-hidden", "true").appendTo(e.shareButtons).addClass("fa").addClass("flipbook-shareBtn").addClass(i.icon).addClass("flipbook-icon-general").addClass("skin-color").bind(e.CLICK_EV, function(e) {
						n.open(i.url, "_self")
					})
				}
				var e = this;
				this.shareButtons = t(r.createElement("span")).appendTo(this.bookLayer).addClass("flipbook-shareButtons").addClass("skin-color-bg").addClass("invisible").addClass("transition");
				var i;
				for (i = 0; i < e.options.social.length; i++) {
					s(e.options.social[i])
				}
			},
			zoomOut: function() {
				if (!this.webglMode) {
					var e = this.scroll.scale / 1.5 < this.scroll.options.zoomMin ? this.scroll.options.zoomMin : this.scroll.scale / 1.5;
					this.scroll.zoom(this.bookLayer.width() / 2, this.bookLayer.height() / 2, e, 400)
				} else this.Book.zoomFor(-1)
			},
			zoomIn: function() {
				if (!this.webglMode) {
					var e = this.scroll.scale * 1.5 > this.scroll.options.zoomMax ? this.scroll.options.zoomMax : this.scroll.scale * 1.5;
					this.scroll.zoom(this.bookLayer.width() / 2, this.bookLayer.height() / 2, e, 400)
				} else this.Book.zoomFor(1)
			},
			onZoom: function(e) {
				this.enableButton(this.btnZoomIn, e < this.options.zoomMax);
				this.enableButton(this.btnZoomOut, e > this.options.zoomMin)
			},
			toggleShare: function() {
				this.shareButtons.toggleClass("invisible")
			},
			createCurrentPage: function() {
				var e = this;
				this.currentPage = t(r.createElement("input")).addClass("flipbook-currentPage").attr("type", "text").addClass("skin-color").appendTo(this.menuWrapper).keyup(function(n) {
					if (n.keyCode == 13) {
						var r = parseInt(t(this).val()) - 1;
						r = r > e.pages.length ? e.pages.length : r;
						if (e.options.rightToLeft) {
							r = e.options.pages.length - r - 1
						}
						e.updateCurrentPage();
						e.Book.goToPage(r)
					}
				}).focus(function(e) {
					t(this).val("")
				}).focusout(function(n) {
					var r = parseInt(t(this).val()) - 1;
					e.updateCurrentPage()
				});
				this.totalPages = t("<span/>").text("/ " + this.options.pages.length).appendTo(this.menuWrapper).addClass("skin-color").addClass("flipbook-totalPages")
			},
			createToc: function() {
				var e = this;
				this.tocHolder = t(r.createElement("div")).addClass("flipbook-tocHolder").addClass("invisible").addClass("skin-color-bg").appendTo(this.wrapper);
				this.toc = t(r.createElement("div")).addClass(".flipbook-toc").appendTo(this.tocHolder);
				e.tocScroll = new iScroll(e.tocHolder[0], {
					bounce: false,
					wheelAction: "none"
				});
				var n = t(r.createElement("span")).addClass("flipbook-tocTitle").addClass("skin-color").appendTo(this.toc);
				var i = t(r.createElement("span")).attr("aria-hidden", "true").appendTo(n).addClass("flipbook-btn-close").addClass("fa fa-times").addClass("flipbook-icon-general").addClass("skin-color").bind(e.START_EV, function(t) {
					e.toggleToc()
				});
				var s = this.pages;
				for (var o = 0; o < s.length; o++) {
					if (s[o].title == "") continue;
					if (typeof s[o].title === "undefined") continue;
					var u = t(r.createElement("a")).attr("class", "flipbook-tocItem").addClass("skin-color").attr("title", String(o + 1)).appendTo(this.toc).bind(e.CLICK_EV, function(n) {
						if (!e.tocScroll.moved) {
							var r = Number(t(this).attr("title")) - 1;
							if (e.options.rightToLeft) r = e.pages.length - r - 1;
							if (e.Book.goingToPage != r) e.Book.goToPage(r)
						}
					});
					t(r.createElement("span")).appendTo(u).text(s[o].title);
					t(r.createElement("span")).appendTo(u).attr("class", "right").text(o + 1)
				}
				e.tocScroll.refresh()
			},
			updateCurrentPage: function() {
				if (typeof this.currentPage === "undefined") return;
				var e, t = this.Book.rightIndex,
					e = t == 0 ? "1" : String(t);
				this.enableButton(this.btnPrev, t > 0);
				this.enableButton(this.btnNext, t < this.pages.length - 1);
				if (this.options.rightToLeft) {
					e = String(this.options.pages.length - parseInt(e) + 1)
				}
				this.currentPage.attr("value", e);
				//if (this.p && this.options.pages.length != 26 && this.options.pages.length != 16 && this.options.pages.length != 8 && this.options.pages.length != 192) this.Book.goToPage(0)
			},
			enableButton: function(e, t) {
				if (t) {
					e.css("opacity", "1");
					e.css("pointer-events", "auto")
				} else {
					e.css("opacity", ".3");
					e.css("pointer-events", "none")
				}
			},
			turnPageComplete: function() {
				this.animating = false;
				this.updateCurrentPage()
			},
			resize: function() {
				var e = this.bookLayer.width(),
					t = this.bookLayer.height(),
					n = this.book.width(),
					r = this.book.height(),
					i = this.menuWrapper.width();
				var s = this;
				if (e == 0 || t == 0 || n == 0 || r == 0) {
					setTimeout(function() {
						s.resize()
					}, 1e3);
					return
				}
				if (e / t >= n / r) this.fitToHeight(true);
				else this.fitToWidth(true); if (this.btnShare) {
					var o = this.btnShare.offset().left;
					var u = this.bookLayer.offset().left;
					this.shareButtons.css("left", String(o - u) + "px")
				}
			},
			fitToHeight: function(e) {
				var t = this.bookLayer.height();
				var n = this.book.height();
				if (e) this.ratio = t / n;
				this.fit(this.ratio, e);
				this.thumbsVertical()
			},
			fitToWidth: function(e) {
				var t = this.bookLayer.width();
				var n = this.book.width();
				if (e) this.ratio = t / n;
				this.fit(this.ratio, e);
				this.thumbsVertical()
			},
			fit: function(e, t) {
				if (!this.webglMode) {
					e = t ? this.ratio : this.scroll.scale;
					if (t) {
						this.scroll.options.zoomMin = e * this.options.zoomMin;
						this.scroll.options.zoomMax = e * this.options.zoomMax
					}
					this.scroll.zoom(this.bookLayer.width() / 2, this.bookLayer.height() / 2, e * this.options.zoom, 0)
				}
			},
			createThumbs: function() {
				var e = this,
					n, i;
				e.thumbsCreated = true;
				e.thumbHolder = t(r.createElement("div")).addClass("flipbook-thumbHolder").addClass("invisible").addClass("skin-color-bg").appendTo(e.wrapper);
				e.thumbsContainer = t(r.createElement("div")).appendTo(e.thumbHolder).addClass("flipbook-thumbContainer").width(2 * e.options.thumbnailWidth + 45);
				var s = t(r.createElement("span")).addClass("flipbook-tocTitle").addClass("skin-color").appendTo(this.thumbHolder);
				var o = t(r.createElement("span")).attr("aria-hidden", "true").appendTo(s).addClass("flipbook-btn-close").addClass("fa fa-times").addClass("flipbook-icon-general").addClass("skin-color").bind(e.START_EV, function(t) {
					e.toggleThumbs()
				});
				e.thumbs = [];
				var u = e.pages;
				var a = t('<div class="flipbook-thumb">').appendTo(e.thumbsContainer).width(e.options.thumbnailWidth);
				for (var f = 0; f < u.length; f++) {
					var l = u[f].thumb;
					var a = t('<div class="flipbook-thumb">').appendTo(e.thumbsContainer);
					var c = t("<img/>").attr("src", l).appendTo(a).width(e.options.thumbnailWidth).height(e.options.thumbnailHeight).attr("title", f + 1).bind(e.CLICK_EV, function(n) {
						if (!e.thumbScroll.moved) {
							var r = Number(t(this).attr("title")) - 1;
							if (e.options.rightToLeft) r = u.length - r - 1;
							if (e.Book.goingToPage != r) e.Book.goToPage(r)
						}
					});
					var h = t("<span/>").text(f + 1).appendTo(a).addClass("skin-color").addClass("flipbook-thumb-num").width(e.options.thumbnailWidth)
				}
				e.thumbScroll = new iScroll(e.thumbHolder[0], {
					bounce: false,
					wheelAction: "none"
				})
			},
			toggleThumbs: function(e) {
				if (!this.thumbsCreated) this.createThumbs();
				if (e) {
					this.thumbHolder.removeClass("invisible")
				} else {
					this.thumbHolder.toggleClass("invisible")
				}
				this.thumbsVertical();
				this.thumbsShowing = !this.thumbHolder.hasClass("invisible");
				if (this.tocShowing) this.tocHolder.toggleClass("invisible")
			},
			toggleToc: function(e) {
				if (e) {
					this.tocHolder.removeClass("invisible")
				} else {
					this.tocHolder.toggleClass("invisible")
				}
				this.tocShowing = !this.tocHolder.hasClass("invisible");
				this.tocScroll.refresh();
				if (this.thumbsShowing) this.thumbHolder.toggleClass("invisible")
			},
			thumbsVertical: function() {
				if (!this.thumbsCreated) return;
				this.thumbScroll.hScroll = false;
				this.thumbScroll.vScroll = true;
				this.thumbScroll.refresh()
			},
			toggleExpand: function() {
				if (THREEx.FullScreen.available()) {
					if (THREEx.FullScreen.activated()) {
						THREEx.FullScreen.cancel()
					} else {
						THREEx.FullScreen.request()
					}
				}
			},
			lightboxStart: function() {
				if (!this.started) this.start();
				this.Book.enable();
				if (this.options.contentOnStart) this.toggleToc(true);
				if (this.options.thumbnailsOnStart) this.toggleThumbs(true)
			},
			lightboxEnd: function() {
				this.Book.disable();
				if (THREEx.FullScreen.available()) {
					if (THREEx.FullScreen.activated()) {
						THREEx.FullScreen.cancel()
					}
				}
			}
		};
		t.extend(t.easing, {
			def: "easeOutQuad",
			swing: function(e, n, r, i, s) {
				return t.easing[t.easing.def](e, n, r, i, s)
			},
			easeInQuad: function(e, t, n, r, i) {
				return r * (t /= i) * t + n
			},
			easeOutQuad: function(e, t, n, r, i) {
				return -r * (t /= i) * (t - 2) + n
			},
			easeInOutQuad: function(e, t, n, r, i) {
				if ((t /= i / 2) < 1) return r / 2 * t * t + n;
				return -r / 2 * (--t * (t - 2) - 1) + n
			},
			easeInCubic: function(e, t, n, r, i) {
				return r * (t /= i) * t * t + n
			},
			easeOutCubic: function(e, t, n, r, i) {
				return r * ((t = t / i - 1) * t * t + 1) + n
			},
			easeInOutCubic: function(e, t, n, r, i) {
				if ((t /= i / 2) < 1) return r / 2 * t * t * t + n;
				return r / 2 * ((t -= 2) * t * t + 2) + n
			},
			easeInQuart: function(e, t, n, r, i) {
				return r * (t /= i) * t * t * t + n
			},
			easeOutQuart: function(e, t, n, r, i) {
				return -r * ((t = t / i - 1) * t * t * t - 1) + n
			},
			easeInOutQuart: function(e, t, n, r, i) {
				if ((t /= i / 2) < 1) return r / 2 * t * t * t * t + n;
				return -r / 2 * ((t -= 2) * t * t * t - 2) + n
			},
			easeInQuint: function(e, t, n, r, i) {
				return r * (t /= i) * t * t * t * t + n
			},
			easeOutQuint: function(e, t, n, r, i) {
				return r * ((t = t / i - 1) * t * t * t * t + 1) + n
			},
			easeInOutQuint: function(e, t, n, r, i) {
				if ((t /= i / 2) < 1) return r / 2 * t * t * t * t * t + n;
				return r / 2 * ((t -= 2) * t * t * t * t + 2) + n
			},
			easeInSine: function(e, t, n, r, i) {
				return -r * Math.cos(t / i * (Math.PI / 2)) + r + n
			},
			easeOutSine: function(e, t, n, r, i) {
				return r * Math.sin(t / i * (Math.PI / 2)) + n
			},
			easeInOutSine: function(e, t, n, r, i) {
				return -r / 2 * (Math.cos(Math.PI * t / i) - 1) + n
			},
			easeInExpo: function(e, t, n, r, i) {
				return t == 0 ? n : r * Math.pow(2, 10 * (t / i - 1)) + n
			},
			easeOutExpo: function(e, t, n, r, i) {
				return t == i ? n + r : r * (-Math.pow(2, -10 * t / i) + 1) + n
			},
			easeInOutExpo: function(e, t, n, r, i) {
				if (t == 0) return n;
				if (t == i) return n + r;
				if ((t /= i / 2) < 1) return r / 2 * Math.pow(2, 10 * (t - 1)) + n;
				return r / 2 * (-Math.pow(2, -10 * --t) + 2) + n
			},
			easeInCirc: function(e, t, n, r, i) {
				return -r * (Math.sqrt(1 - (t /= i) * t) - 1) + n
			},
			easeOutCirc: function(e, t, n, r, i) {
				return r * Math.sqrt(1 - (t = t / i - 1) * t) + n
			},
			easeInOutCirc: function(e, t, n, r, i) {
				if ((t /= i / 2) < 1) return -r / 2 * (Math.sqrt(1 - t * t) - 1) + n;
				return r / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + n
			},
			easeInElastic: function(e, t, n, r, i) {
				var s = 1.70158;
				var o = 0;
				var u = r;
				if (t == 0) return n;
				if ((t /= i) == 1) return n + r;
				if (!o) o = i * .3;
				if (u < Math.abs(r)) {
					u = r;
					var s = o / 4
				} else var s = o / (2 * Math.PI) * Math.asin(r / u);
				return -(u * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o)) + n
			},
			easeOutElastic: function(e, t, n, r, i) {
				var s = 1.70158;
				var o = 0;
				var u = r;
				if (t == 0) return n;
				if ((t /= i) == 1) return n + r;
				if (!o) o = i * .3;
				if (u < Math.abs(r)) {
					u = r;
					var s = o / 4
				} else var s = o / (2 * Math.PI) * Math.asin(r / u);
				return u * Math.pow(2, -10 * t) * Math.sin((t * i - s) * 2 * Math.PI / o) + r + n
			},
			easeInOutElastic: function(e, t, n, r, i) {
				var s = 1.70158;
				var o = 0;
				var u = r;
				if (t == 0) return n;
				if ((t /= i / 2) == 2) return n + r;
				if (!o) o = i * .3 * 1.5;
				if (u < Math.abs(r)) {
					u = r;
					var s = o / 4
				} else var s = o / (2 * Math.PI) * Math.asin(r / u); if (t < 1) return -.5 * u * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o) + n;
				return u * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o) * .5 + r + n
			},
			easeInBack: function(e, t, n, r, s, o) {
				if (o == i) o = 1.70158;
				return r * (t /= s) * t * ((o + 1) * t - o) + n
			},
			easeOutBack: function(e, t, n, r, s, o) {
				if (o == i) o = 1.70158;
				return r * ((t = t / s - 1) * t * ((o + 1) * t + o) + 1) + n
			},
			easeInOutBack: function(e, t, n, r, s, o) {
				if (o == i) o = 1.70158;
				if ((t /= s / 2) < 1) return r / 2 * t * t * (((o *= 1.525) + 1) * t - o) + n;
				return r / 2 * ((t -= 2) * t * (((o *= 1.525) + 1) * t + o) + 2) + n
			},
			easeInBounce: function(e, n, r, i, s) {
				return i - t.easing.easeOutBounce(e, s - n, 0, i, s) + r
			},
			easeOutBounce: function(e, t, n, r, i) {
				if ((t /= i) < 1 / 2.75) {
					return r * 7.5625 * t * t + n
				} else if (t < 2 / 2.75) {
					return r * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + n
				} else if (t < 2.5 / 2.75) {
					return r * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + n
				} else {
					return r * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + n
				}
			},
			easeInOutBounce: function(e, n, r, i, s) {
				if (n < s / 2) return t.easing.easeInBounce(e, n * 2, 0, i, s) * .5 + r;
				return t.easing.easeOutBounce(e, n * 2 - s, 0, i, s) * .5 + i * .5 + r
			}
		})
	})(jQuery, window, document)
} {
	FLIPBOOK.PageWebGL = function(e, t, n, r, i, s, o, u) {
		this.book = e;
		this.preloader = o;
		this.frontTexture = n;
		this.backTexture = r;
		this.index = t;
		this.materialType = s.pageMaterial;
		this.pW = s.pageWidth;
		this.pH = s.pageHeight;
		this.pageShininess = s.pageShininess;
		this.nfacesw = s.pageSegmentsW;
		this.nfacesh = s.pageSegmentsH;
		this.mats = [];
		this.pageHardness = i;
		this.pageThickness = i;
		this.duration = s.pageFlipDuration;
		this.angle = .25 * Math.PI * this.pW / this.pH;
		this.force = 10;
		this.offset = 0;
		this.to = null;
		this.flipPt = .3;
		this.mod = null;
		this.bend = null;
		this.pivot = null;
		this.isFlippedLeft = false;
		this.isFlippedRight = true;
		this.flippingLeft = false;
		this.flippingRight = false;
		this.zz = 2;
		this.sides = {
			bottom: 3,
			top: 2,
			right: 0,
			left: 1,
			front: 4,
			back: 5
		};
		this.overdraw = 1;
		var a;
		for (var f = 0; f < 6; f++) {
			if (f == this.sides.front) {
				this.mats[this.sides.front] = this.createEmptyMaterial(this.materialType)
			} else if (f == this.sides.back) {
				this.mats[this.sides.back] = this.createEmptyMaterial(this.materialType)
			} else {
				var l = parseInt(Math.random() * 5);
				var c = [7829367, 10066329, 11184810, 14540253, 16777215];
				var h = c[l];
				this.mats[f] = new THREE.MeshBasicMaterial({
					color: h
				})
			}
		}
		THREE.Mesh.call(this, new THREE.CubeGeometry(this.pW, this.pH, 1, this.nfacesw, this.nfacesh, 1), new THREE.MeshFaceMaterial(this.mats));
		this.overdraw = true;
		this.castShadow = true;
		this.receiveShadow = true;
		this.position.x = this.pW * .5;
		var p = 4;
		if (this.index > 0) this.position.z = this.book.pages[this.index - 1].position.z - p / 2 - p / 2 - 1;
		else this.position.z = p / 2;
		this.mod = new MOD3.ModifierStack(new MOD3.LibraryThree, this);
		this.pivot = new MOD3.Pivot(this.position.x, 0, 0);
		this.mod.addModifier(this.pivot);
		this.mod.collapse();
		this.bend = new MOD3.Bend(0, 0, 0);
		this.bend.constraint = MOD3.ModConstant.LEFT;
		if (this.pH > this.pW) this.bend.switchAxes = true;
		this.mod.addModifier(this.bend)
	};
	FLIPBOOK.PageWebGL.prototype = new THREE.Mesh;
	FLIPBOOK.PageWebGL.prototype.constructor = FLIPBOOK.PageWebGL;
	FLIPBOOK.PageWebGL.prototype.load = function() {
		if (this.loaded) return;
		var e, t = this;
		e = THREE.ImageUtils.loadTexture(t.frontTexture, null, function() {
			t.mats[t.sides.front] = t.createMaterial(t.materialType, e);
			e = THREE.ImageUtils.loadTexture(t.backTexture, null, function() {
				t.mats[t.sides.back] = t.createMaterial(t.materialType, e);
				t.material = new THREE.MeshFaceMaterial(t.mats);
				t.loaded = true
			})
		})
	};
	FLIPBOOK.PageWebGL.prototype.createEmptyMaterial = function(e) {
		var t;
		if (e == "lambert") {
			t = new THREE.MeshLambertMaterial({
				map: this.preloader,
				overdraw: this.overdraw,
				ambient: 14540253,
				specular: 16777215,
				diffuse: 16777215,
				shininess: 20,
				perPixel: true
			})
		} else if (e == "phong") {
			t = new THREE.MeshPhongMaterial({
				map: this.preloader,
				overdraw: this.overdraw,
				ambient: 14540253,
				specular: 16777215,
				diffuse: 16777215,
				shininess: 20,
				perPixel: true
			})
		} else if (e == "basic") {
			t = new THREE.MeshBasicMaterial({
				map: this.preloader,
				overdraw: this.overdraw,
				perPixel: true
			})
		}
		return t
	};
	FLIPBOOK.PageWebGL.prototype.createMaterial = function(e, t) {
		var n;
		if (e == "lambert") {
			n = new THREE.MeshLambertMaterial({
				map: t,
				ambient: 14540253,
				specular: 16777215,
				diffuse: 16777215,
				shininess: 20,
				perPixel: false
			})
		} else if (e == "phong") {
			n = new THREE.MeshPhongMaterial({
				map: t,
				ambient: 14540253,
				specular: 16777215,
				diffuse: 16777215,
				shininess: 20,
				perPixel: false
			})
		} else if (e == "basic") {
			n = new THREE.MeshBasicMaterial({
				map: t,
				perPixel: false
			})
		}
		return n
	};
	FLIPBOOK.PageWebGL.prototype.flipLeft = function(e) {
		if (!this.isFlippedLeft && !this.flippingLeft && !this.flippingRight && this.index == this.book.flippedleft) {
			if (this.duration > 0) {
				this.flippingLeft = true;
				this.flipping = true;
				this.force = 0;
				var t = (1 + Math.random() * .5) / this.pageHardness;
				var n = .1 + Math.random() * .2;
				this.to = {
					angle: this.rotation.y,
					t: -1,
					xx: 0,
					thiss: this,
					force: this.force,
					offset: this.offset
				};
				this.bendIn(-Math.PI, t, n)
			} else {
				this.rotation.y = -Math.PI;
				this.flippingLeft = false;
				this.isFlippedLeft = true;
				this.flippingRight = false;
				this.isFlippedRight = false
			}
			var r = 4;
			this.position.z = r / 2 + 1;
			for (var i = this.index - 1; i >= 0; i--) {
				this.book.pages[i].position.z = this.book.pages[i + 1].position.z - r / 2 - r / 2 - 1
			}
			for (var i = this.index + 1; i < this.book.pages.length; i++) {
				this.book.pages[i].position.z = this.book.pages[i - 1].position.z - r / 2 - r / 2 - 1
			}
		}
	};
	FLIPBOOK.PageWebGL.prototype.flipRight = function(e) {
		if (!this.isFlippedRight && !this.flippingRight && !this.flippingLeft && this.index == this.book.getNumPages() - this.book.flippedright - 1) {
			if (this.duration > 0) {
				this.flippingRight = true;
				this.flipping = true;
				this.force = 0;
				this.to = {
					angle: this.rotation.y,
					t: -1,
					xx: 0,
					thiss: this,
					force: this.force,
					offset: this.offset
				};
				var t = (-1 - Math.random() * .5) / this.pageHardness;
				var n = .1 + Math.random() * .2;
				this.bendIn(0, t, n)
			} else {
				this.rotation.y = 0;
				this.flippingLeft = false;
				this.isFlippedLeft = false;
				this.flippingRight = false;
				this.isFlippedRight = true
			}
			var r = 4;
			this.position.z = r / 2 + 1;
			for (var i = this.index + 1; i < this.book.pages.length; i++) {
				this.book.pages[i].position.z = this.book.pages[i - 1].position.z - r / 2 - r / 2 - 1
			}
			for (var i = this.index - 1; i >= 0; i--) {
				this.book.pages[i].position.z = this.book.pages[i + 1].position.z - r / 2 - r / 2 - 1
			}
		}
	};
	FLIPBOOK.PageWebGL.prototype.bendIn = function(e, t, n) {
		this.bend.setAngle(Math.random() * (Math.PI / 24) - Math.PI / 48);
		this.bend.force = 0;
		this.bend.offset = 0;
		this.mod.apply();
		var r = this.duration * (400 + this.pageHardness * 5);
		var i = this.duration * (300 + this.pageHardness * 5);
		(new TWEEN.Tween(this.to)).to({
			angle: e,
			xx: 1,
			t: 1
		}, r).easing(TWEEN.Easing.Sinusoidal.EaseInOut).onUpdate(this.renderFlip).start();
		(new TWEEN.Tween(this.to)).to({
			force: t
		}, i).easing(TWEEN.Easing.Quadratic.EaseInOut).onUpdate(this.modApply).onComplete(this.bendOut).start();
		(new TWEEN.Tween(this.to)).to({
			offset: n
		}, i).easing(TWEEN.Easing.Quadratic.EaseOut).onUpdate(this.modApply).start()
	};
	FLIPBOOK.PageWebGL.prototype.bendOut = function() {
		var e = this.thiss;
		var t = e.duration * (700 - e.pageHardness * 50);
		(new TWEEN.Tween(e.to)).to({
			force: 0,
			offset: 1
		}, t).easing(TWEEN.Easing.Sinusoidal.EaseOut).onUpdate(e.modApply).onComplete(e.flipFinished).start();
		var n = 4;
		if (e.flippingLeft) {
			if (e.index < e.book.pages.length - 1) {
				e.position.z = e.book.pages[e.index + 1].position.z;
				for (var r = e.index - 1; r >= 0; r--) {
					e.book.pages[r].position.z = e.book.pages[r + 1].position.z - n / 2 - n / 2 - 1
				}
			} else {
				e.book.pages[e.index].position.z = e.book.pages[e.index - 1].position.z + n / 2 + n / 2 - 1
			}
		}
		if (e.flippingRight) {
			if (e.index > 0) {
				e.position.z = e.book.pages[e.index - 1].position.z;
				for (var r = e.index + 1; r < e.book.pages.length; r++) {
					e.book.pages[r].position.z = e.book.pages[r - 1].position.z - n / 2 - n / 2 - 1
				}
			} else {
				e.position.z = e.book.pages[e.index + 1].position.z + n / 2 + n / 2 - 1
			}
		}
	};
	FLIPBOOK.PageWebGL.prototype.modApply = function() {
		this.thiss.bend.force = this.force;
		this.thiss.bend.offset = this.offset;
		this.thiss.mod.apply()
	};
	FLIPBOOK.PageWebGL.prototype.renderFlip = function() {
		var e = Math.PI * .5;
		if (this.thiss.flippingLeft && this.thiss.index == 0 && this.thiss.book.getNumPages() > 1) this.thiss.book.centerContainer.position.x = (1 - this.xx) * this.thiss.book.centerContainer.position.x;
		else if (this.thiss.flippingLeft && this.thiss.index == this.thiss.book.getNumPages() - 1) this.thiss.book.centerContainer.position.x = (1 - this.xx) * this.thiss.book.centerContainer.position.x + this.xx * this.thiss.book.pageW * .5;
		else if (this.thiss.flippingRight && this.thiss.index == 0) this.thiss.book.centerContainer.position.x = (1 - this.xx) * this.thiss.book.centerContainer.position.x - this.xx * this.thiss.book.pageW * .5;
		else if (this.thiss.flippingRight && this.thiss.index == this.thiss.book.getNumPages() - 1) this.thiss.book.centerContainer.position.x = (1 - this.xx) * this.thiss.book.centerContainer.position.x;
		this.thiss.rotation.y = this.angle
	};
	FLIPBOOK.PageWebGL.prototype.flipFinished = function() {
		var e = this.thiss;
		if (e.flippingLeft) {
			e.flippingLeft = false;
			e.isFlippedLeft = true;
			e.flippingRight = false;
			e.isFlippedRight = false
		} else if (e.flippingRight) {
			e.flippingLeft = false;
			e.isFlippedRight = true;
			e.flippingRight = false;
			e.isFlippedLeft = false
		}
		e.bend.force = 0;
		e.bend.offset = 0;
		e.mod.apply();
		e.flipping = false;
		e.book.flipFinnished()
	};
	FLIPBOOK.PageWebGL.prototype.isFlippedLeft = function() {
		return this.thiss.isFlippedLeft
	};
	FLIPBOOK.PageWebGL.prototype.isFlippedRight = function() {
		return this.thiss.isFlippedRight
	}
} {
	FLIPBOOK.BookWebGL = function(e, t) {
		this.elementId = jQuery(t.main.elem).attr("id");
		this.wrapper = typeof e == "object" ? e : document.getElementById(e);
		this.options = t;
		this.pageW = t.pageWidth;
		this.pageH = t.pageHeight;
		this.onTurnPageComplete = null;
		this.scroll = t.scroll;
		this.pagesArr = t.pagesArr;
		this.pages = [];
		this.animating = false;
		this.rightIndex = 0;
		this.sc = 1;
		var n = this.wrapper.style;
		n.width = "100%";
		n.height = "100%";
		n.position = "absolute";
		n.overflow = "hidden";
		this.init3d();
		this.createPages();
		this.rendering = false;
		if (!t.lightBox) this.enable();
		this.onResize()
	};
	FLIPBOOK.BookWebGL.prototype = new THREE.Object3D;
	FLIPBOOK.BookWebGL.prototype.constructor = FLIPBOOK.BookWebGL;
	FLIPBOOK.BookWebGL.prototype.init3d = function() {
		var e = this,
			t = 30,
			n = jQuery(e.wrapper).width(),
			r = jQuery(e.wrapper).height(),
			i = n / r,
			s = 1,
			o = 1e4,
			u = this.options;
		e.clock = new THREE.Clock;
		e.scene = new THREE.Scene;
		e.camera = new THREE.PerspectiveCamera(t, i, s, o);
		e.scene.add(e.camera);
		e.zoom = u.zoom;
		e.pan = u.pan;
		e.tilt = u.tilt;
		this.updateCameraPosition();
		this.canvas = document.createElement("canvas");
		var a = this.canvas.style;
		a.width = "100%";
		a.height = "100%";
		a.position = "absolute";
		a.left = "0";
		a.top = "0";
		this._bind("DOMMouseScroll", this.canvas);
		this._bind("mousewheel", this.canvas);
		this._bind("mouseout", this.canvas);
		this._bind(this.options.parent.START_EV, this.canvas);
		this._bind(this.options.parent.MOVE_EV, this.canvas);
		this._bind(this.options.parent.END_EV, this.canvas);
		this._bind(this.options.parent.CANCEL_EV, this.canvas);
		if (e.options.renderer == "webgl") {
			e.renderer = new THREE.WebGLRenderer({
				alpha: true,
				antialias: true,
				canvas: this.canvas
			});
			//e.renderer.setClearColor(16777215, 0);
			e.renderer.setClearColor(0, 0)
		} else if (e.options.renderer == "canvas") {
			e.renderer = new THREE.CanvasRenderer({
				antialias: true,
				canvas: this.canvas
			})
		} else if (e.options.renderer == "css3d") {}
		e.renderer.setSize(n, r);
		if (u.pageShadow) {}
		jQuery(window).resize(function() {
			e.onResize()
		});
		if (u.pointLight == true) {
			var f = new THREE.PointLight(u.pointLightColor);
			f.position.set(u.pointLightX, u.pointLightY, u.pointLightZ);
			f.intensity = u.pointLightIntensity;
			e.scene.add(f)
		}
		if (u.directionalLight == true) {
			var l = new THREE.DirectionalLight(u.directionalLightColor);
			l.position.set(u.directionalLightX, u.directionalLightY, u.directionalLightZ);
			l.intensity = u.directionalLightIntensity;
			e.scene.add(l)
		}
		if (u.ambientLight == true) {
			var c = new THREE.AmbientLight(u.ambientLightColor);
			c.intensity = u.ambientLightIntensity;
			e.scene.add(c)
		}
		if (u.spotLight) {
			var h = new THREE.SpotLight(u.spotLightColor);
			h.position.z = u.spotLightZ;
			h.intensity = u.spotLightIntensity;
			e.scene.add(h)
		}
		e.scene.add(this);
		this.position.set(u.bookX, u.bookY, u.bookZ);
		this.centerContainer = new THREE.Object3D;
		this.add(this.centerContainer);
		this.centerContainer.position.x = -this.pageW * .5;
		if (this.options.rightToLeft) {
			this.centerContainer.position.x = this.pageW * .5
		}
		this.flippedleft = 0;
		this.flippedright = 0;
		this.cameraZMin = 300;
		this.cameraZMax = 5e3
	};
	FLIPBOOK.BookWebGL.prototype.onResize = function() {
		var e = jQuery(this.wrapper).width(),
			t = jQuery(this.wrapper).height();
		if (t > e) {
			this.sc = e / t
		} else {
			this.sc = 1
		}
		this.renderer.setSize(e, t);
		this.camera.aspect = e / t;
		this.camera.updateProjectionMatrix();
		this.updateCameraPosition()
	};
	FLIPBOOK.BookWebGL.prototype.updateCameraPosition = function() {
		var e = Math.PI * this.tilt / 180;
		var t = 0;
		var n = this.options.cameraDistance * Math.sin(e) / this.zoom;
		var r = this.options.cameraDistance * Math.cos(e) / this.zoom;
		this.scale.set(this.sc, this.sc, this.sc);
		e = Math.PI * this.pan / 180;
		t = Math.sin(e) * r;
		r = Math.cos(e) * r;
		this.camera.position.set(Math.round(t), Math.round(n), Math.round(r));
		this.camera.lookAt(this.scene.position)
	};
	FLIPBOOK.BookWebGL.prototype.createPages = function() {
		var e = this;
		var t, n, r, i, s;
		var o = THREE.ImageUtils.loadTexture(this.options.assets.preloader, null, function() {
			for (s = 0; s < e.pagesArr.length / 2; s++) {
				t = e.pagesArr[2 * s].src;
				n = 2 * s + 1 >= e.pagesArr.length ? "" : e.pagesArr[2 * s + 1].src;
				r = s == 0 || s == e.pagesArr.length / 2 - 1 ? e.options.coverHardness : e.options.pageHardness;
				i = new FLIPBOOK.PageWebGL(e, s, t, n, r, e.options, o);
				e.pages.push(i);
				e.centerContainer.add(i);
				e.flippedright++
			}
			e.pages[0].load()
		})
	};
	FLIPBOOK.BookWebGL.prototype.getNumPages = function() {
		return this.pages.length
	};
	FLIPBOOK.BookWebGL.prototype.centerContainer = function() {
		return this.centerContainer
	};
	FLIPBOOK.BookWebGL.prototype.goToPage = function(e, t) {
		this.goingToPage = e;
		e % 2 != 0 ? e++ : e;
		var n = this;
		var r = this.options.pageFlipDuration * 1e3 / 8;
		if (typeof t != "undefined" && t) {
			r = 0;
			for (var i = 0; i < n.pages.length; i++) {
				n.pages[i].duration = 0
			}
		}
		if (this.rightIndex > e) {
			r = 1 / (this.rightIndex - e) * this.options.pageFlipDuration * 1e3 / 8;
			if (this.rightIndex - 2 > e) {
				this.prevPage(false);
				if (r > 0) setTimeout(function() {
					n.goToPage(e, t)
				}, r);
				else n.goToPage(e, t)
			} else {
				this.prevPage();
				setTimeout(function() {
					if (typeof t != "undefined" && t) {
						for (var e = 0; e < n.pages.length; e++) {
							n.pages[e].duration = n.options.pageFlipDuration
						}
					}
				}, r)
			}
		} else if (this.rightIndex < e) {
			r = -1 / (this.rightIndex - e) * this.options.pageFlipDuration * 1e3 / 8;
			if (this.rightIndex + 2 < e) {
				this.nextPage(false);
				if (r > 0) setTimeout(function() {
					n.goToPage(e, t)
				}, r);
				else n.goToPage(e, t)
			} else {
				this.nextPage();
				setTimeout(function() {
					if (typeof t != "undefined" && t) {
						for (var e = 0; e < n.pages.length; e++) {
							n.pages[e].duration = n.options.pageFlipDuration
						}
					}
				}, r)
			}
		}
	};
	FLIPBOOK.BookWebGL.prototype.nextPage = function(e) {
		if (this.flippedright == 0) return;
		var t;
		for (t = 0; t < this.pages.length; t++) {
			if (this.pages[t].flippingRight) return
		}
		var n = this.pages[this.pages.length - this.flippedright];
		var r = this.pages[this.flippedleft + 1];
		var i = this.pages[this.flippedleft];
		if (typeof e == "undefined" || e) {
			if (r) r.load();
			if (i) i.load()
		}
		if (!n.flipping) {
			n.flipLeft()
		}
		this.flippedleft++;
		this.flippedright--;
		this.rightIndex += 2;
		this.options.parent.updateCurrentPage()
	};
	FLIPBOOK.BookWebGL.prototype.prevPage = function(e) {
		if (this.flippedleft == 0) return;
		var t;
		for (t = 0; t < this.pages.length; t++) {
			if (this.pages[t].flippingLeft) return
		}
		var n = this.pages[this.flippedleft - 1];
		var r = this.pages[this.flippedleft - 1];
		var i = this.pages[this.flippedleft - 2];
		if (typeof e == "undefined" || e) {
			if (r) r.load();
			if (i) i.load()
		}
		if (!n.flipping) n.flipRight();
		this.flippedleft--;
		this.flippedright++;
		this.rightIndex -= 2;
		this.options.parent.updateCurrentPage()
	};
	FLIPBOOK.BookWebGL.prototype.firstPage = function() {};
	FLIPBOOK.BookWebGL.prototype.flipFinnished = function() {};
	FLIPBOOK.BookWebGL.prototype.lastPage = function() {};
	FLIPBOOK.BookWebGL.prototype.updateVisiblePages = function() {};
	FLIPBOOK.BookWebGL.prototype.render = function(e) {
		var t = this;
		t.rendering = e;
		e ? t.wrapper.appendChild(t.renderer.domElement) : t.wrapper.removeChild(t.renderer.domElement);
		t.animate = function() {
			if (t.rendering) {
				if (!t.enabled) {
					return
				}
				requestAnimationFrame(t.animate);
				TWEEN.update();
				t.renderer.render(t.scene, t.camera)
			}
		};
		t.animate()
	};
	FLIPBOOK.BookWebGL.prototype.zoomFor = function(e, t) {
		if (this.zooming) return;
		if (typeof t === "undefined") t = 200;
		var n = this,
			r = 1.3;
		var i = e > 0 ? this.zoom * r : this.zoom / r;
		i = i > this.options.zoomMax ? this.options.zoomMax : i;
		i = i < this.options.zoomMin ? this.options.zoomMin : i;
		this.zooming = true;
		(new TWEEN.Tween(this)).to({
			zoom: i
		}, t).easing(TWEEN.Easing.Sinusoidal.EaseInOut).onUpdate(this.updateCameraPosition).onComplete(function() {
			n.zooming = false
		}).start();
		n.options.parent.onZoom(i)
	};
	FLIPBOOK.BookWebGL.prototype.zoomTo = function(e, t) {
		if (this.zooming) return;
		if (typeof t === "undefined") t = 200;
		var n = this;
		newZoom = e > this.options.zoomMax ? this.options.zoomMax : e;
		newZoom = e < this.options.zoomMin ? this.options.zoomMin : e;
		this.zooming = true;
		(new TWEEN.Tween(this)).to({
			zoom: newZoom
		}, t).easing(TWEEN.Easing.Sinusoidal.EaseInOut).onUpdate(this.updateCameraPosition).onComplete(function() {
			n.zooming = false
		}).start();
		n.options.parent.onZoom(newZoom)
	};
	FLIPBOOK.BookWebGL.prototype.tiltTo = function(e) {
		var t = this,
			n = .3;
		var r = this.tilt + e * n;
		r = r > this.options.tiltMax ? this.options.tiltMax : r;
		r = r < this.options.tiltMin ? this.options.tiltMin : r;
		this.tilt = r;
		this.updateCameraPosition()
	};
	FLIPBOOK.BookWebGL.prototype.panTo = function(e) {
		var t = this,
			n = .2;
		var r = this.pan - e * n;
		r = r > this.options.panMax ? this.options.panMax : r;
		r = r < this.options.panMin ? this.options.panMin : r;
		this.pan = r;
		this.updateCameraPosition()
	};
	FLIPBOOK.BookWebGL.prototype._bind = function(e, t, n) {
		(t || this.wrapper).addEventListener(e, this, !!n)
	};
	FLIPBOOK.BookWebGL.prototype.handleEvent = function(e) {
		var t = this;
		switch (e.type) {
			case t.options.parent.START_EV:
				if (!t.options.parent.hasTouch && e.button !== 0) return;
				t._start(e);
				break;
			case t.options.parent.MOVE_EV:
				t._move(e);
				break;
			case "mouseout":
				t._end(e);
				break;
			case t.options.parent.END_EV:
			case t.options.parent.CANCEL_EV:
				t._end(e);
				break;
			case "DOMMouseScroll":
			case "mousewheel":
				t._wheel(e);
				break
		}
	};
	FLIPBOOK.BookWebGL.prototype._wheel = function(e) {
		e.preventDefault();
		var t, n;
		if ("wheelDeltaX" in e) {
			t = e.wheelDeltaX / 12;
			n = e.wheelDeltaY / 12
		} else if ("wheelDelta" in e) {
			t = n = e.wheelDelta / 12
		} else if ("detail" in e) {
			t = n = -e.detail * 3
		} else {
			return
		}
		this.zoomFor(n);
		if (this.zoom <= 1) {
			this.resetCameraPosition()
		}
	};
	FLIPBOOK.BookWebGL.prototype.resetCameraPosition = function() {
		this.position.x = this.options.bookX;
		this.position.y = this.options.bookY;
		this.position.z = this.options.bookZ
	};
	FLIPBOOK.BookWebGL.prototype._start = function(e) {
		this.mouseDown = true;
		var t = this.options.parent.hasTouch ? e.touches[0] : e;
		this.pointX = t.pageX;
		this.pointY = t.pageY;
		this.startPoint = t;
		var n = this._getVector(e);
		var r = new THREE.Projector;
		r.unprojectVector(n, this.camera);
		var i = new THREE.Raycaster(this.camera.position, n.sub(this.camera.position).normalize());
		var s = i.intersectObjects(this.pages);
		this.pageMouseDown = s.length > 0
	};
	FLIPBOOK.BookWebGL.prototype._getVector = function(e) {
		var t = jQuery(this.canvas).width(),
			n = jQuery(this.canvas).height(),
			r = e.pageX - jQuery(this.canvas).offset().left,
			i = e.pageY - jQuery(this.canvas).offset().top,
			s = jQuery(this.canvas).offset().x,
			o = jQuery(this.canvas).offset().y;
		return new THREE.Vector3(r / t * 2 - 1, -(i / n) * 2 + 1, .5)
	};
	FLIPBOOK.BookWebGL.prototype._move = function(e) {
		e.preventDefault();
		var t = this._getVector(e);
		var n = new THREE.Projector;
		n.unprojectVector(t, this.camera);
		var r = new THREE.Raycaster(this.camera.position, t.sub(this.camera.position).normalize());
		var i = r.intersectObjects(this.pages);
		if (i.length > 0) {
			this.wrapper.style.cursor = "pointer"
		} else {
			this.wrapper.style.cursor = "move"
		}
		var s = this.options.parent.hasTouch ? e.touches[0] : e,
			o = (s.pageX - this.pointX) * .5,
			u = (s.pageY - this.pointY) * .5;
		this.pointX = s.pageX;
		this.pointY = s.pageY;
		if (!this.mouseDown) {
			this.onMouseMove = "";
			return
		}
		if (i.length > 0) {
			if (this.onMouseMove == "") this.onMouseMove = "scroll"
		} else {
			if (this.onMouseMove == "") this.onMouseMove = "rotate"
		} if (this.onMouseMove == "scroll") {
			this.position.x += 4 * o / this.zoom;
			this.position.y -= 4 * u / this.zoom
		} else if (this.onMouseMove == "rotate") {
			this.tiltTo(u);
			this.panTo(o)
		}
	};
	FLIPBOOK.BookWebGL.prototype._end = function(e) {
		this.mouseDown = false;
		var t = this.options.parent.hasTouch ? e.touches[0] : e;
		this.pointX = t.pageX;
		this.pointY = t.pageY;
		this.endPoint = t;
		var n = this._getVector(e);
		var r = new THREE.Projector;
		r.unprojectVector(n, this.camera);
		var i = new THREE.Raycaster(this.camera.position, n.sub(this.camera.position).normalize());
		var s = i.intersectObjects(this.pages);
		if (s.length > 0) {
			if (this.pageMouseDown && Math.abs(this.startPoint.pageX - this.endPoint.pageX) < 5 && Math.abs(this.startPoint.pageY - this.endPoint.pageY) < 5) {
				var o = s[0];
				var u = o.object;
				if (u.flipping) return;
				if (u.isFlippedLeft) this.prevPage();
				else this.nextPage()
			}
		}
		this.pageMouseDown = false
	};
	FLIPBOOK.BookWebGL.prototype.moveCamera = function(e, t) {};
	FLIPBOOK.BookWebGL.prototype.enable = function() {
		this.enabled = true;
		this.render(true);
		this.onResize()
	};
	FLIPBOOK.BookWebGL.prototype.disable = function() {
		this.enabled = false
	}
} {
	FLIPBOOK.Lightbox = function(e, t, n) {
		var r = this;
		this.context = e;
		this.options = n;
		jQuery(e.elem).css("cursor", "pointer").bind(e.START_EV, function() {
			r.openLightbox()
		});
		var i = jQuery(e.elem).find("img");
		jQuery(e.elem).css("position", "relative");
		r.overlay = jQuery(document.createElement("div")).attr("class", "flipbook-overlay").css("visibility", "hidden").css("z-index", "999999").bind(e.START_EV, function(e) {
			if (jQuery(e.target).hasClass("flipbook-overlay")) {
				r.closeLightbox()
			}
		}).appendTo("body");
		r.wrapper = jQuery(document.createElement("div")).css("width", r.options.lightboxWidth).css("height", "auto").appendTo(r.overlay);
		if (r.options.lightboxTransparent == true) {
			r.wrapper.attr("class", "flipbook-wrapper-transparent").css("margin", "0px auto").css("padding", "0px").css("height", "100%").css("width", "100%")
		} else {
			r.wrapper.attr("class", "flipbook-wrapper").css("margin", String(r.options.lightboxMargin) + "px auto").css("padding", String(r.options.lightboxPadding) + "px");
			t.css("margin", String(r.options.lightboxPadding) + "px")
		}
		t.appendTo(r.wrapper);
		var s = jQuery("<div/>").appendTo(r.wrapper).addClass("flipbook-lightbox-toolbar");
		var o = jQuery('<span title="Press Esc tp close"/>').appendTo(s).bind(e.CLICK_EV, function(e) {
			r.closeLightbox()
		}).addClass("flipbook-lightbox-close fa fa-times skin-color skin-color-bg");
		var u = jQuery('<span title="Enter Fullscreen"/>').appendTo(s).bind(e.CLICK_EV, function(t) {
			e.toggleExpand();
			if (THREEx.FullScreen.available()) {
				if (THREEx.FullScreen.activated()) {
					jQuery(this).attr("title", "Enter Fullscreen").removeClass("fa-compress").addClass("fa-expand");
				} else {
					jQuery(this).attr("title", "Exit Fullscreen").removeClass("fa-expand").addClass("fa-compress")
				}
			}
		}).addClass("flipbook-lightbox-fullscreen fa fa-expand skin-color skin-color-bg");
		r.resize();
		jQuery(window).resize(function() {
			r.resize()
		});
		r.resize();
		if (n.lightBoxOpened) r.openLightbox();
	};
	FLIPBOOK.Lightbox.prototype = {
		openLightbox: function() {
			var e = this;
			this.overlay.css("visibility", "visible");
			this.overlay.css("display", "none");
			this.wrapper.css("display", "none");
			this.overlay.fadeIn("fast", function() {
				e.wrapper.css("display", "block");
				e.context.lightboxStart()
			});
			jQuery("body").css("overflow", "hidden")
		},
		closeLightbox: function() {
			var e = this;
			this.overlay.fadeOut("fast");
			jQuery("body").css("overflow", "auto");
			e.context.lightboxEnd()
		},
		resize: function() {
			var e = this;
			var t = jQuery(window),
				n = t.width(),
				r = t.height();
			if (e.options.lightboxTransparent == true) {
				e.wrapper.css("width", "100%")
			} else {
				e.wrapper.css("width", e.options.lightboxWidth);
				if (e.wrapper.width() + 2 * e.options.lightboxMargin + 2 * e.options.lightboxPadding < e.options.lightboxMinWidth) {
					e.wrapper.css("width", String(n - 2 * e.options.lightboxMargin - 2 * e.options.lightboxPadding) + "px")
				}
			}
		}
	}
} {
	FLIPBOOK.Book = function(e, t) {
		var n = this,
			r, i = t.main;
		this.main = t.main;
		this.hasTouch = i.hasTouch;
		this.perspective = i.perspective;
		this.transform = i.transform;
		this.transformOrigin = i.transformOrigin;
		this.transformStyle = i.transformStyle;
		this.transition = i.transition;
		this.transitionDuration = i.transitionDuration;
		this.transitionDelay = i.transitionDelay;
		this.transitionProperty = i.transitionProperty;
		this.backfaceVisibility = i.backfaceVisibility;
		this.wrapper = typeof e == "object" ? e : document.getElementById(e);
		jQuery(this.wrapper).addClass("flipbook-book");
		this.options = {
			onTurnPageComplete: null,
			flipType: "2d",
			shadow1opacity: .7,
			shadow2opacity: .7
		};
		for (r in t) this.options[r] = t[r];
		this.pages = [];
		this.pageWidth = this.options.pageWidth;
		this.pageHeight = this.options.pageHeight;
		this.animating = false;
		this.rightIndex = 0;
		this.onTurnPageComplete = this.options.onTurnPageComplete;
		var s = this.wrapper.style;
		s.width = String(2 * this.pageWidth) + "px";
		s.height = String(this.pageHeight) + "px";
		this.flipType = this.options.flipType;
		this.shadow1opacity = this.options.shadow1opacity;
		this.shadow2opacity = this.options.shadow2opacity;
		var o, u;
		this.shadowL = document.createElement("div");
		jQuery(this.shadowL).addClass("flipbook-shadowLeft").css("width", String(this.pageWidth) + "px").css("height", String(this.pageHeight) + "px");
		this.wrapper.appendChild(this.shadowL);
		this.shadowLVisible = true;
		this.shadowR = document.createElement("div");
		jQuery(this.shadowR).addClass("flipbook-shadowRight").css("width", String(this.pageWidth) + "px").css("height", String(this.pageHeight) + "px");
		this.wrapper.appendChild(this.shadowR);
		this.shadowRVisible = true;
		this.shadowRight();
		for (r = 0; r < n.options.pages.length; r++) {
			this.addPage(r);
			jQuery(this.pages[r].wrapper).attr("title", r + 1).bind(n.main.CLICK_EV, function(e) {
				function a(e, t) {
					return Math.abs(e - t) < 10
				}
				var t, r, i, s, o, u;
				t = n.main.scroll.x;
				r = n.xOnMouseDown;
				i = n.main.scroll.y;
				s = n.yOnMouseDown;
				o = n.zoomOnMouseUp;
				u = n.zoomOnMouseDown;
				if (n.main.scroll.moved || n.main.scroll.animating || n.main.scroll.zoomed || n.zoomOnMouseDown != n.main.scroll.scale) return;
				if (e.target.className == "flipbook-page-link") return;
				if (a(t, r) && a(i, s) && o === u) {
					var f = Number(jQuery(this).attr("title")) - 1;
					if (f == n.rightIndex) {
						n.nextPage()
					} else {
						n.prevPage()
					}
				}
			}).bind(n.main.START_EV, function(e) {
				n.zoomOnMouseDown = n.main.scroll.scale;
				n.xOnMouseDown = n.main.scroll.x;
				n.yOnMouseDown = n.main.scroll.y
			}).bind(n.main.END_EV, function(e) {
				n.zoomOnMouseUp = n.main.scroll.scale;
				n.xOnMouseUp = n.main.scroll.x;
				n.yOnMouseUp = n.main.scroll.y
			})
		}
		this.pages[0].loadPage();
		this.pages[1].loadPage();
		if (this.pages.length > 2) this.pages[2].loadPage();
		this.updateVisiblePages();
		jQuery(this.wrapper).on("DOMMouseScroll", function(e) {
			e.preventDefault()
		});
		jQuery(this.wrapper).on("mousewheel", function(e) {
			e.preventDefault()
		})
	};
	FLIPBOOK.Book.prototype.constructor = FLIPBOOK.Book;
	FLIPBOOK.Book.prototype = {
		addPage: function(e) {
			var t = new FLIPBOOK.Page(this.options.pages[e], this.pageWidth, this.pageHeight, this.pages.length, this);
			this.wrapper.appendChild(t.wrapper);
			this.pages.push(t)
		},
		goToPage: function(e, t) {
			if (e < 0 || e > this.pages.length) return;
			if (this.animating) return;
			if (isNaN(e)) return;
			this.goingToPage = e;
			e = e % 2 == 1 ? e + 1 : e;
			if (e == 0) {
				this.rightIndex == this.pages.length ? this.shadowNone() : this.shadowRight()
			} else if (e == this.pages.length) {
				this.rightIndex == 0 ? this.shadowNone() : this.shadowLeft()
			}
			var n, r, i, s;
			if (e < this.rightIndex) {
				n = this.pages[this.rightIndex - 1];
				r = this.pages[e];
				if (e > 0) {
					i = this.pages[e - 1];
					if (this.flipType == "2d") i.expand();
					i.show()
				}
				if (this.flipType == "2d") r.contract();
				this.animatePages(n, r, t)
			} else if (e > this.rightIndex) {
				n = this.pages[e - 1];
				r = this.pages[this.rightIndex];
				if (e < this.pages.length) {
					s = this.pages[e];
					if (this.flipType == "2d") s.expand();
					s.show()
				}
				if (this.flipType == "2d") n.contract();
				this.animatePages(r, n, t)
			}
			this.rightIndex = e
		},
		animatePages: function(e, t, n) {
			this.animating = true;
			var r = this,
				i = r.options.time1,
				s = r.options.time2,
				o = r.options.transition1,
				u = r.options.transition2;
			if (typeof n != "undefined" && n) {
				i = s = 0
			}
			e.show();
			jQuery(e.wrapper).css(r.transform, "rotateY(0deg)");
			if (this.flipType == "3d") {
				t.show();
				jQuery(t.wrapper).css("visibility", "hidden");
				jQuery(e.wrapper).css("visibility", "visible");
				jQuery(e.wrapper).css("text-indent", "0px");
				jQuery(e.wrapper).css(r.transform, "rotateY(0deg)");
				var a = e.index < t.index ? "-90" : "90";
				jQuery(e.overlay).animate({
					opacity: r.shadow1opacity
				}, {
					duration: i,
					easing: o
				});
				jQuery(e.wrapper).animate({
					textIndent: a
				}, {
					step: function(e, t) {
						jQuery(this).css(r.transform, "rotateY(" + Math.round(e) + "deg)")
					},
					duration: i,
					easing: o,
					complete: function() {
						e.hide();
						e.hideVisibility();
						jQuery(t.wrapper).css("visibility", "visible");
						jQuery(t.overlay).css("opacity", r.shadow1opacity);
						jQuery(t.overlay).animate({
							opacity: 0
						}, {
							duration: s,
							easing: u
						});
						jQuery(t.wrapper).css(r.transform, "rotateY(" + a + "deg)");
						jQuery(t.wrapper).css("text-indent", String(-a) + "px");
						jQuery(t.wrapper).animate({
							textIndent: 0
						}, {
							step: function(e, t) {
								jQuery(this).css(r.transform, "rotateY(" + Math.round(e) + "deg)")
							},
							complete: function() {
								jQuery(e.wrapper).css(r.transform, "rotateY(0deg)");
								jQuery(e.wrapper).css("visibility", "visible");
								jQuery(t.wrapper).css(r.transform, "rotateY(0deg)");
								jQuery(t.wrapper).css("visibility", "visible")
							},
							duration: s,
							easing: u
						})
					}
				})
			} else {
				jQuery(e.wrapper).animate({
					width: 0
				}, i, o, function() {
					t.show();
					jQuery(t.wrapper).animate({
						width: t.width
					}, s, u)
				})
			}
			setTimeout(function() {
				if (r.onTurnPageComplete) r.onTurnPageComplete.call(r);
				r.main.updateCurrentPage();
				r.animating = false;
				r.updateVisiblePages();
				e.overlay.style.opacity = "0";
				jQuery(e.wrapper).css(r.transform, "rotateY(0deg)");
				jQuery(t.wrapper).css(r.transform, "rotateY(0deg)")
			}, Number(i) + Number(s))
		},
		updateVisiblePages: function() {
			if (this.animating) return;
			for (var e = 0; e < this.pages.length; e++) {
				if (e < this.rightIndex - 1 || e > this.rightIndex) {
					if (this.flipType == "2d") this.pages[e].contract();
					this.pages[e].hide()
				} else {
					if (this.flipType == "2d") this.pages[e].expand();
					this.pages[e].show()
				} if (this.rightIndex == 0) {
					if (this.flipType == "2d") this.pages[1].contract();
					this.pages[1].hide()
				}
			}
			var t = this.rightIndex,
				n = this.pages;
			if (t > 2) n[t - 3].loadPage();
			if (t > 0) n[t - 2].loadPage();
			if (t > 0) n[t - 1].loadPage();
			if (t < n.length) n[t].loadPage();
			if (t < n.length && t < n.length - 1) n[t + 1].loadPage();
			if (t < n.length - 2) n[t + 2].loadPage();
			if (t > 0 && t < this.pages.length) {
				this.shadowBoth()
			} else if (t == 0) {
				this.shadowRight()
			} else {
				this.shadowLeft()
			}
		},
		nextPage: function() {
			if (this.rightIndex == this.pages.length || this.animating) return;
			this.goToPage(this.rightIndex + 2)
		},
		prevPage: function() {
			if (this.rightIndex == 0 || this.animating) return;
			this.goToPage(this.rightIndex - 2)
		},
		enable: function() {},
		disable: function() {},
		shadowRight: function() {
			if (this.shadowLVisible) {
				this.shadowLVisible = false;
				this.shadowL.style.display = "none"
			}
			if (!this.shadowRVisible) {
				this.shadowRVisible = true;
				this.shadowR.style.display = "block"
			}
		},
		shadowLeft: function() {
			if (this.shadowRVisible) {
				this.shadowRVisible = false;
				this.shadowR.style.display = "none"
			}
			if (!this.shadowLVisible) {
				this.shadowLVisible = true;
				this.shadowL.style.display = "block"
			}
		},
		shadowBoth: function() {
			if (!this.shadowRVisible) {
				this.shadowRVisible = true;
				this.shadowR.style.display = "block"
			}
			if (!this.shadowLVisible) {
				this.shadowLVisible = true;
				this.shadowL.style.display = "block"
			}
		},
		shadowNone: function() {
			if (this.shadowRVisible) {
				this.shadowRVisible = false;
				this.shadowR.style.display = "none"
			}
			if (this.shadowLVisible) {
				this.shadowLVisible = false;
				this.shadowL.style.display = "none"
			}
		}
	}
} {
	FLIPBOOK.Page = function(e, t, n, r, i) {
		this.wrapper = document.createElement("div");
		jQuery(this.wrapper).addClass("flipbook-page");
		this.s = this.wrapper.style;
		this.s.width = String(t) + "px";
		this.s.height = String(n) + "px";
		this.index = r;
		this.book = i;
		this.width = t;
		this.height = n;
		this.invisible = false;
		this.image = new Image;
		this.image.src = i.options.assets.preloader;
		this.imageSrc = e.src;
		this.wrapper.appendChild(this.image);
		this.imageLoader = new Image;
		this.overlay = new Image;
		this.overlay.src = i.options.assets.overlay;
		this.wrapper.appendChild(this.overlay);
		this.overlay.style.opacity = "0";
		this.expanded = true;
		this.htmlContent = e.htmlContent;
		if (this.index % 2 == 0) {
			this.s.zIndex = String(100 - this.index);
			this.s.left = "50%";
			this.right(this.image);
			this.right(this.overlay)
		} else {
			this.shadow = new Image;
			this.wrapper.appendChild(this.shadow);
			this.shadow.src = i.options.assets.left;
			this.left(this.shadow);
			this.s.zIndex = String(100 + this.index);
			this.s.right = "50%";
			this.left(this.image);
			this.left(this.overlay)
		} if (typeof this.htmlContent !== "undefined") {
			this.htmlContainer = document.createElement("div");
			jQuery(this.htmlContainer).addClass("flipbook-page-htmlContainer");
			this.wrapper.appendChild(this.htmlContainer);
			this.index % 2 == 0 ? this.right(this.htmlContainer) : this.left(this.htmlContainer)
		}
		this.image.style[this.book.transform] = "translateZ(0)";
		this.overlay.style[this.book.transform] = "translateZ(0)";
		this.overlay.style["pointer-events"] = "none";
		if (this.shadow) {
			this.shadow.style[this.book.transform] = "translateZ(0)";
			this.shadow.style["pointer-events"] = "none"
		}
		this.s.top = "0px";
		if (this.book.flipType == "3d") {
			this.wrapper.style[this.book.transformOrigin] = this.index % 2 != 0 ? "100% 50%" : "0% 50%"
		}
		if (e.links) {
			var s = this;
			for (var o = 0; o < e.links.length; o++) {
				var u = e.links[o];

				function a(e) {
					var t = document.createElement("div");
					s.wrapper.appendChild(t);
					t.classList.add("flipbook-page-link");
					t.style.position = "absolute";
					t.style.left = String(e.x) + "px";
					t.style.top = String(e.y) + "px";
					t.style.width = String(e.width) + "px";
					t.style.height = String(e.height) + "px";
					t.style.backgroundColor = e.color;
					t.style.opacity = e.alpha;
					t.style.cursor = "pointer";
					jQuery(t).click(function(t) {
						if (Number(e.page) > 0) {
							i.goToPage(Number(e.page))
						} else if (String(e.url) != "") {
							window.open(e.url)
						}
					}).mouseenter(function() {
						t.style.backgroundColor = e.hoverColor;
						t.style.opacity = e.hoverAlpha
					}).mouseleave(function() {
						t.style.backgroundColor = e.color;
						t.style.opacity = e.alpha
					})
				}
				a(u)
			}
		}
	};
	FLIPBOOK.Page.prototype = {
		loadPage: function() {
			if (this.loaded == true) return;
			this.loaded = true;
			var e = this;
			e.imageLoader.src = this.imageSrc;
			jQuery(e.imageLoader).load(function() {
				e.image.src = e.imageSrc
			});
			if (typeof this.htmlContent !== "undefined") {
				this.htmlContainer.innerHTML = this.htmlContent
			}
		},
		flipView: function() {},
		expand: function() {
			if (!this.expanded) this.s.width = String(this.width) + "px";
			this.expanded = true
		},
		contract: function() {
			if (this.expanded) this.s.width = "0px";
			this.expanded = false
		},
		show: function() {
			if (this.hidden) {
				this.s.display = "block"
			}
			this.hidden = false
		},
		hide: function() {
			if (!this.hidden) {
				this.s.display = "none"
			}
			this.hidden = true
		},
		hideVisibility: function() {
			if (!this.invisible) this.s.visibility = "hidden";
			this.invisible = true
		},
		left: function(e) {
			var t = e.style;
			t.width = String(this.width) + "px";
			t.height = String(this.height) + "px";
			t.position = "absolute";
			t.top = "0px";
			t.right = "0px"
		},
		right: function(e) {
			var t = e.style;
			t.width = String(this.width) + "px";
			t.height = String(this.height) + "px";
			t.position = "absolute";
			t.top = "0px";
			t.left = "0px"
		}
	}
} {
	(function(e, t) {
		function A(e) {
			if (i === "") return e;
			e = e.charAt(0).toUpperCase() + e.substr(1);
			return i + e
		}
		var n = Math,
			r = t.createElement("div").style,
			i = function() {
				var e = "t,webkitT,MozT,msT,OT".split(","),
					t, n = 0,
					i = e.length;
				for (; n < i; n++) {
					t = e[n] + "ransform";
					if (t in r) {
						return e[n].substr(0, e[n].length - 1)
					}
				}
				return false
			}(),
			s = i ? "-" + i.toLowerCase() + "-" : "",
			o = A("transform"),
			u = A("transitionProperty"),
			a = A("transitionDuration"),
			f = A("transformOrigin"),
			l = A("transitionTimingFunction"),
			c = A("transitionDelay"),
			h = /android/gi.test(navigator.appVersion),
			p = /iphone|ipad/gi.test(navigator.appVersion),
			d = /hp-tablet/gi.test(navigator.appVersion),
			v = A("perspective") in r,
			m = "ontouchstart" in e && !d,
			g = i !== false,
			y = A("transition") in r,
			b = "onorientationchange" in e ? "orientationchange" : "resize",
			w = m ? "touchstart" : "mousedown",
			E = m ? "touchmove" : "mousemove",
			S = m ? "touchend" : "mouseup",
			x = m ? "touchcancel" : "mouseup",
			T = function() {
				if (i === false) return false;
				var e = {
					"": "transitionend",
					webkit: "webkitTransitionEnd",
					Moz: "transitionend",
					O: "otransitionend",
					ms: "MSTransitionEnd"
				};
				return e[i]
			}(),
			N = function() {
				return e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function(e) {
					return setTimeout(e, 1)
				}
			}(),
			C = function() {
				return e.cancelRequestAnimationFrame || e.webkitCancelAnimationFrame || e.webkitCancelRequestAnimationFrame || e.mozCancelRequestAnimationFrame || e.oCancelRequestAnimationFrame || e.msCancelRequestAnimationFrame || clearTimeout
			}(),
			k = v ? " translateZ(0)" : "",
			L = function(n, r) {
				var i = this,
					c;
				i.wrapper = typeof n == "object" ? n : t.getElementById(n);
				i.wrapper.style.overflow = "hidden";
				i.scroller = i.wrapper.children[0];
				i.options = {
					hScroll: true,
					vScroll: true,
					x: 0,
					y: 0,
					bounce: true,
					bounceLock: false,
					momentum: true,
					lockDirection: true,
					useTransform: true,
					useTransition: false,
					topOffset: 0,
					checkDOMChanges: false,
					handleClick: true,
					hScrollbar: true,
					vScrollbar: true,
					fixedScrollbar: h,
					hideScrollbar: p,
					fadeScrollbar: p && v,
					scrollbarClass: "",
					zoom: false,
					zoomMin: 1,
					zoomMax: 4,
					doubleTapZoom: 2,
					wheelAction: "scroll",
					snap: false,
					snapThreshold: 1,
					onRefresh: null,
					onBeforeScrollStart: function(e) {
						e.preventDefault()
					},
					onScrollStart: null,
					onBeforeScrollMove: null,
					onScrollMove: null,
					onBeforeScrollEnd: null,
					onScrollEnd: null,
					onTouchEnd: null,
					onDestroy: null,
					onZoomStart: null,
					onZoom: null,
					onZoomEnd: null,
					keepInCenterH: false,
					keepInCenterV: false
				};
				for (c in r) i.options[c] = r[c];
				i.x = i.options.x;
				i.y = i.options.y;
				i.options.useTransform = g && i.options.useTransform;
				i.options.hScrollbar = i.options.hScroll && i.options.hScrollbar;
				i.options.vScrollbar = i.options.vScroll && i.options.vScrollbar;
				i.options.zoom = i.options.useTransform && i.options.zoom;
				i.options.useTransition = y && i.options.useTransition;
				i.keepInCenterH = i.options.keepInCenterH;
				i.keepInCenterV = i.options.keepInCenterV;
				if (i.options.zoom && h) {
					k = ""
				}
				i.scroller.style[u] = i.options.useTransform ? s + "transform" : "top left";
				i.scroller.style[a] = "0";
				i.scroller.style[f] = "0 0";
				if (i.options.useTransition) i.scroller.style[l] = "cubic-bezier(0.33,0.66,0.66,1)";
				if (i.options.useTransform) i.scroller.style[o] = "translate(" + i.x + "px," + i.y + "px)" + k;
				else i.scroller.style.cssText += ";position:absolute;top:" + i.y + "px;left:" + i.x + "px"; if (i.options.useTransition) i.options.fixedScrollbar = true;
				i.refresh();
				i._bind(b, e);
				i._bind(w);
				if (!m) {
					if (i.options.wheelAction != "none") {
						i._bind("DOMMouseScroll");
						i._bind("mousewheel")
					}
				}
				if (i.options.checkDOMChanges) i.checkDOMTime = setInterval(function() {
					i._checkDOMChanges()
				}, 500)
			};
		L.prototype = {
			enabled: true,
			x: 0,
			y: 0,
			steps: [],
			scale: 1,
			currPageX: 0,
			currPageY: 0,
			pagesX: [],
			pagesY: [],
			aniTime: null,
			wheelZoomCount: 0,
			handleEvent: function(e) {
				var t = this;
				switch (e.type) {
					case w:
						if (!m && e.button !== 0) return;
						t._start(e);
						break;
					case E:
						t._move(e);
						break;
					case S:
					case x:
						t._end(e);
						break;
					case b:
						t._resize();
						break;
					case "DOMMouseScroll":
					case "mousewheel":
						t._wheel(e);
						break;
					case T:
						t._transitionEnd(e);
						break
				}
			},
			_checkDOMChanges: function() {
				if (this.moved || this.zoomed || this.animating || this.scrollerW == this.scroller.offsetWidth * this.scale && this.scrollerH == this.scroller.offsetHeight * this.scale) return;
				this.refresh()
			},
			_scrollbar: function(e) {
				var r = this,
					i;
				if (!r[e + "Scrollbar"]) {
					if (r[e + "ScrollbarWrapper"]) {
						if (g) r[e + "ScrollbarIndicator"].style[o] = "";
						r[e + "ScrollbarWrapper"].parentNode.removeChild(r[e + "ScrollbarWrapper"]);
						r[e + "ScrollbarWrapper"] = null;
						r[e + "ScrollbarIndicator"] = null
					}
					return
				}
				if (!r[e + "ScrollbarWrapper"]) {
					i = t.createElement("div");
					if (r.options.scrollbarClass) i.className = r.options.scrollbarClass + e.toUpperCase();
					else i.style.cssText = "position:absolute;z-index:100;" + (e == "h" ? "height:7px;bottom:1px;left:2px;right:" + (r.vScrollbar ? "7" : "2") + "px" : "width:7px;bottom:" + (r.hScrollbar ? "7" : "2") + "px;top:2px;right:1px");
					i.style.cssText += ";pointer-events:none;" + s + "transition-property:opacity;" + s + "transition-duration:" + (r.options.fadeScrollbar ? "350ms" : "0") + ";overflow:hidden;opacity:" + (r.options.hideScrollbar ? "0" : "1");
					r.wrapper.appendChild(i);
					r[e + "ScrollbarWrapper"] = i;
					i = t.createElement("div");
					if (!r.options.scrollbarClass) {
						i.style.cssText = "position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);" + s + "background-clip:padding-box;" + s + "box-sizing:border-box;" + (e == "h" ? "height:100%" : "width:100%") + ";" + s + "border-radius:3px;border-radius:3px"
					}
					i.style.cssText += ";pointer-events:none;" + s + "transition-property:" + s + "transform;" + s + "transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);" + s + "transition-duration:0;" + s + "transform: translate(0,0)" + k;
					if (r.options.useTransition) i.style.cssText += ";" + s + "transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)";
					r[e + "ScrollbarWrapper"].appendChild(i);
					r[e + "ScrollbarIndicator"] = i
				}
				if (e == "h") {
					r.hScrollbarSize = r.hScrollbarWrapper.clientWidth;
					r.hScrollbarIndicatorSize = n.max(n.round(r.hScrollbarSize * r.hScrollbarSize / r.scrollerW), 8);
					r.hScrollbarIndicator.style.width = r.hScrollbarIndicatorSize + "px";
					r.hScrollbarMaxScroll = r.hScrollbarSize - r.hScrollbarIndicatorSize;
					r.hScrollbarProp = r.hScrollbarMaxScroll / r.maxScrollX
				} else {
					r.vScrollbarSize = r.vScrollbarWrapper.clientHeight;
					r.vScrollbarIndicatorSize = n.max(n.round(r.vScrollbarSize * r.vScrollbarSize / r.scrollerH), 8);
					r.vScrollbarIndicator.style.height = r.vScrollbarIndicatorSize + "px";
					r.vScrollbarMaxScroll = r.vScrollbarSize - r.vScrollbarIndicatorSize;
					r.vScrollbarProp = r.vScrollbarMaxScroll / r.maxScrollY
				}
				r._scrollbarPos(e, true)
			},
			_resize: function() {
				var e = this;
				setTimeout(function() {
					e.refresh()
				}, h ? 200 : 0)
			},
			_pos: function(e, t) {
				if (this.zoomed) return;
				if (this.scrollerW < this.wrapperW && this.keepInCenterH) {
					e = (this.wrapperW - this.scrollerW) / 2;
					this.moved = false
				}
				if (this.scrollerH < this.wrapperH && this.keepInCenterV) {
					t = (this.wrapperH - this.scrollerH) / 2;
					this.moved = false
				}
				e = n.round(e);
				t = n.round(t);
				if (this.options.useTransform) {
					this.scroller.style[o] = "translate(" + e + "px," + t + "px) scale(" + this.scale + ")" + k
				} else {
					this.scroller.style.left = e + "px";
					this.scroller.style.top = t + "px"
				}
				this.x = e;
				this.y = t;
				this._scrollbarPos("h");
				this._scrollbarPos("v")
			},
			_scrollbarPos: function(e, t) {
				var r = this,
					i = e == "h" ? r.x : r.y,
					s;
				if (!r[e + "Scrollbar"]) return;
				i = r[e + "ScrollbarProp"] * i;
				if (i < 0) {
					if (!r.options.fixedScrollbar) {
						s = r[e + "ScrollbarIndicatorSize"] + n.round(i * 3);
						if (s < 8) s = 8;
						r[e + "ScrollbarIndicator"].style[e == "h" ? "width" : "height"] = s + "px"
					}
					i = 0
				} else if (i > r[e + "ScrollbarMaxScroll"]) {
					if (!r.options.fixedScrollbar) {
						s = r[e + "ScrollbarIndicatorSize"] - n.round((i - r[e + "ScrollbarMaxScroll"]) * 3);
						if (s < 8) s = 8;
						r[e + "ScrollbarIndicator"].style[e == "h" ? "width" : "height"] = s + "px";
						i = r[e + "ScrollbarMaxScroll"] + (r[e + "ScrollbarIndicatorSize"] - s)
					} else {
						i = r[e + "ScrollbarMaxScroll"]
					}
				}
				r[e + "ScrollbarWrapper"].style[c] = "0";
				r[e + "ScrollbarWrapper"].style.opacity = t && r.options.hideScrollbar ? "0" : "1";
				r[e + "ScrollbarIndicator"].style[o] = "translate(" + (e == "h" ? i + "px,0)" : "0," + i + "px)") + k
			},
			_start: function(t) {
				var r = this,
					i = m ? t.touches[0] : t,
					s, u, a, f, l;
				if (!r.enabled) return;
				if (r.options.onBeforeScrollStart) r.options.onBeforeScrollStart.call(r, t);
				if (r.options.useTransition || r.options.zoom) r._transitionTime(0);
				r.moved = false;
				r.animating = false;
				r.zoomed = false;
				r.distX = 0;
				r.distY = 0;
				r.absDistX = 0;
				r.absDistY = 0;
				r.dirX = 0;
				r.dirY = 0;
				if (r.options.zoom && m && t.touches.length > 1) {
					f = n.abs(t.touches[0].pageX - t.touches[1].pageX);
					l = n.abs(t.touches[0].pageY - t.touches[1].pageY);
					r.touchesDistStart = n.sqrt(f * f + l * l);
					r.originX = n.abs(t.touches[0].pageX + t.touches[1].pageX - r.wrapperOffsetLeft * 2) / 2 - r.x;
					r.originY = n.abs(t.touches[0].pageY + t.touches[1].pageY - r.wrapperOffsetTop * 2) / 2 - r.y;
					if (r.options.onZoomStart) r.options.onZoomStart.call(r, t)
				}
				if (r.options.momentum) {
					if (r.options.useTransform) {
						s = getComputedStyle(r.scroller, null)[o].replace(/[^0-9\-.,]/g, "").split(",");
						u = +(s[12] || s[4]);
						a = +(s[13] || s[5])
					} else {
						u = +getComputedStyle(r.scroller, null).left.replace(/[^0-9-]/g, "");
						a = +getComputedStyle(r.scroller, null).top.replace(/[^0-9-]/g, "")
					} if (u != r.x || a != r.y) {
						if (r.options.useTransition) r._unbind(T);
						else C(r.aniTime);
						r.steps = [];
						r._pos(u, a);
						if (r.options.onScrollEnd) r.options.onScrollEnd.call(r)
					}
				}
				r.absStartX = r.x;
				r.absStartY = r.y;
				r.startX = r.x;
				r.startY = r.y;
				r.pointX = i.pageX;
				r.pointY = i.pageY;
				r.startTime = t.timeStamp || Date.now();
				if (r.options.onScrollStart) r.options.onScrollStart.call(r, t);
				r._bind(E, e);
				r._bind(S, e);
				r._bind(x, e)
			},
			_move: function(e) {
				var t = this,
					r = m ? e.touches[0] : e,
					i = r.pageX - t.pointX,
					s = r.pageY - t.pointY,
					u = t.x + i,
					a = t.y + s,
					f, l, c, h = e.timeStamp || Date.now();
				if (t.options.onBeforeScrollMove) t.options.onBeforeScrollMove.call(t, e);
				if (t.options.zoom && m && e.touches.length > 1) {
					f = n.abs(e.touches[0].pageX - e.touches[1].pageX);
					l = n.abs(e.touches[0].pageY - e.touches[1].pageY);
					t.touchesDist = n.sqrt(f * f + l * l);
					t.zoomed = true;
					c = 1 / t.touchesDistStart * t.touchesDist * this.scale;
					if (c < t.options.zoomMin) c = .5 * t.options.zoomMin * Math.pow(2, c / t.options.zoomMin);
					else if (c > t.options.zoomMax) c = 2 * t.options.zoomMax * Math.pow(.5, t.options.zoomMax / c);
					t.lastScale = c / this.scale;
					u = this.originX - this.originX * t.lastScale + this.x, a = this.originY - this.originY * t.lastScale + this.y;
					this.scroller.style[o] = "translate(" + u + "px," + a + "px) scale(" + c + ")" + k;
					if (t.options.onZoom) t.options.onZoom.call(t, e);
					return
				}
				t.pointX = r.pageX;
				t.pointY = r.pageY;
				if (u > 0 || u < t.maxScrollX) {
					u = t.options.bounce ? t.x + i / 2 : u >= 0 || t.maxScrollX >= 0 ? 0 : t.maxScrollX
				}
				if (a > t.minScrollY || a < t.maxScrollY) {
					a = t.options.bounce ? t.y + s / 2 : a >= t.minScrollY || t.maxScrollY >= 0 ? t.minScrollY : t.maxScrollY
				}
				t.distX += i;
				t.distY += s;
				t.absDistX = n.abs(t.distX);
				t.absDistY = n.abs(t.distY);
				if (t.absDistX < 6 && t.absDistY < 6) {
					return
				}
				if (t.options.lockDirection) {
					if (t.absDistX > t.absDistY + 5) {
						a = t.y;
						s = 0
					} else if (t.absDistY > t.absDistX + 5) {
						u = t.x;
						i = 0
					}
				}
				t.moved = true;
				t._pos(u, a);
				t.dirX = i > 0 ? -1 : i < 0 ? 1 : 0;
				t.dirY = s > 0 ? -1 : s < 0 ? 1 : 0;
				if (h - t.startTime > 300) {
					t.startTime = h;
					t.startX = t.x;
					t.startY = t.y
				}
				if (t.options.onScrollMove) t.options.onScrollMove.call(t, e)
			},
			_end: function(r) {
				if (m && r.touches.length !== 0) return;
				var i = this,
					s = m ? r.changedTouches[0] : r,
					u, f, l = {
						dist: 0,
						time: 0
					},
					c = {
						dist: 0,
						time: 0
					},
					h = (r.timeStamp || Date.now()) - i.startTime,
					p = i.x,
					d = i.y,
					v, g, y, b, w;
				i._unbind(E, e);
				i._unbind(S, e);
				i._unbind(x, e);
				if (i.options.onBeforeScrollEnd) i.options.onBeforeScrollEnd.call(i, r);
				if (i.zoomed) {
					w = i.scale * i.lastScale;
					w = Math.max(i.options.zoomMin, w);
					w = Math.min(i.options.zoomMax, w);
					i.lastScale = w / i.scale;
					i.scale = w;
					i.x = i.originX - i.originX * i.lastScale + i.x;
					i.y = i.originY - i.originY * i.lastScale + i.y;
					i.scroller.style[a] = "200ms";
					i.scroller.style[o] = "translate(" + i.x + "px," + i.y + "px) scale(" + i.scale + ")" + k;
					i.zoomed = false;
					i.refresh();
					if (i.options.onZoomEnd) i.options.onZoomEnd.call(i, r, w);
					return
				}
				if (!i.moved) {
					if (true) {
						if (i.doubleTapTimer && i.options.zoom) {
							clearTimeout(i.doubleTapTimer);
							i.doubleTapTimer = null;
							if (i.options.onZoomStart) i.options.onZoomStart.call(i, r);
							if (i.options.onZoomEnd) {
								setTimeout(function() {
									i.options.onZoomEnd.call(i, r, w)
								}, 200)
							}
						} else if (this.options.handleClick) {
							i.doubleTapTimer = setTimeout(function() {
								i.doubleTapTimer = null;
								u = s.target;
								while (u.nodeType != 1) u = u.parentNode;
								if (u.tagName != "SELECT" && u.tagName != "INPUT" && u.tagName != "TEXTAREA") {
									f = t.createEvent("MouseEvents");
									f.initMouseEvent("click", true, true, r.view, 1, s.screenX, s.screenY, s.clientX, s.clientY, r.ctrlKey, r.altKey, r.shiftKey, r.metaKey, 0, null);
									f._fake = true;
									u.dispatchEvent(f)
								}
								if (i.options.onTouchEnd) i.options.onTouchEnd.call(i, r)
							}, i.options.zoom ? 250 : 0)
						}
					}
					i._resetPos(400);
					return
				}
				if (h < 300 && i.options.momentum) {
					l = p ? i._momentum(p - i.startX, h, -i.x, i.scrollerW - i.wrapperW + i.x, i.options.bounce ? i.wrapperW : 0) : l;
					c = d ? i._momentum(d - i.startY, h, -i.y, i.maxScrollY < 0 ? i.scrollerH - i.wrapperH + i.y - i.minScrollY : 0, i.options.bounce ? i.wrapperH : 0) : c;
					p = i.x + l.dist;
					d = i.y + c.dist;
					if (i.x > 0 && p > 0 || i.x < i.maxScrollX && p < i.maxScrollX) l = {
						dist: 0,
						time: 0
					};
					if (i.y > i.minScrollY && d > i.minScrollY || i.y < i.maxScrollY && d < i.maxScrollY) c = {
						dist: 0,
						time: 0
					}
				}
				if (l.dist || c.dist) {
					y = n.max(n.max(l.time, c.time), 10);
					if (i.options.snap) {
						v = p - i.absStartX;
						g = d - i.absStartY;
						if (n.abs(v) < i.options.snapThreshold && n.abs(g) < i.options.snapThreshold) {
							i.scrollTo(i.absStartX, i.absStartY, 200)
						} else {
							b = i._snap(p, d);
							p = b.x;
							d = b.y;
							y = n.max(b.time, y)
						}
					}
					i.scrollTo(n.round(p), n.round(d), y);
					if (i.options.onTouchEnd) i.options.onTouchEnd.call(i, r);
					return
				}
				if (i.options.snap) {
					v = p - i.absStartX;
					g = d - i.absStartY;
					if (n.abs(v) < i.options.snapThreshold && n.abs(g) < i.options.snapThreshold) i.scrollTo(i.absStartX, i.absStartY, 200);
					else {
						b = i._snap(i.x, i.y);
						if (b.x != i.x || b.y != i.y) i.scrollTo(b.x, b.y, b.time)
					} if (i.options.onTouchEnd) i.options.onTouchEnd.call(i, r);
					return
				}
				i._resetPos(200);
				if (i.options.onTouchEnd) i.options.onTouchEnd.call(i, r)
			},
			_resetPos: function(e) {
				var t = this;
				if (t.keepInCenterH && t.scrollerW < t.wrapperW) {
					resetX = t.x >= 0 ? (t.wrapperW - t.scrollerW) / 2 : t.x < t.maxScrollX ? t.maxScrollX : t.x
				} else resetX = t.x >= 0 ? 0 : t.x < t.maxScrollX ? t.maxScrollX : t.x; if (t.keepInCenterV && t.scrollerH < t.wrapperH) {
					resetY = t.y >= t.minScrollY || t.maxScrollY > 0 ? t.minScrollY : t.y < t.maxScrollY ? t.maxScrollY : t.y;
					resetY = t.y > 0 ? (t.wrapperH - t.scrollerH) / 2 : resetY
				} else resetY = t.y >= t.minScrollY || t.maxScrollY > 0 ? t.minScrollY : t.y < t.maxScrollY ? t.maxScrollY : t.y; if (resetX == t.x && resetY == t.y) {
					if (t.moved) {
						t.moved = false;
						if (t.options.onScrollEnd) t.options.onScrollEnd.call(t)
					}
					if (t.hScrollbar && t.options.hideScrollbar) {
						if (i == "webkit") t.hScrollbarWrapper.style[c] = "300ms";
						t.hScrollbarWrapper.style.opacity = "0"
					}
					if (t.vScrollbar && t.options.hideScrollbar) {
						if (i == "webkit") t.vScrollbarWrapper.style[c] = "300ms";
						t.vScrollbarWrapper.style.opacity = "0"
					}
					return
				}
				t.scrollTo(resetX, resetY, e || 0)
			},
			_wheel: function(e) {
				var t = this,
					n, r, i, s, o;
				if ("wheelDeltaX" in e) {
					n = e.wheelDeltaX / 12;
					r = e.wheelDeltaY / 12
				} else if ("wheelDelta" in e) {
					n = r = e.wheelDelta / 12
				} else if ("detail" in e) {
					n = r = -e.detail * 3
				} else {
					return
				} if (t.options.wheelAction == "zoom") {
					o = t.scale * Math.pow(2, 1 / 3 * (r ? r / Math.abs(r) : 0));
					if (o < t.options.zoomMin) o = t.options.zoomMin;
					if (o > t.options.zoomMax) o = t.options.zoomMax;
					if (o != t.scale) {
						if (!t.wheelZoomCount && t.options.onZoomStart) t.options.onZoomStart.call(t, e);
						t.wheelZoomCount++;
						t.zoom(e.pageX, e.pageY, o, 400);
						setTimeout(function() {
							t.wheelZoomCount--;
							if (!t.wheelZoomCount && t.options.onZoomEnd) t.options.onZoomEnd.call(t, e, t.scale)
						}, 400)
					}
					return
				}
				i = t.x + n;
				s = t.y + r;
				if (i > 0) i = 0;
				else if (i < t.maxScrollX) i = t.maxScrollX;
				if (s > t.minScrollY) s = t.minScrollY;
				else if (s < t.maxScrollY) s = t.maxScrollY;
				if (t.maxScrollY < 0) {
					t.scrollTo(i, s, 0)
				}
			},
			_transitionEnd: function(e) {
				var t = this;
				if (e.target != t.scroller) return;
				t._unbind(T);
				t._startAni()
			},
			_startAni: function() {
				var e = this,
					t = e.x,
					r = e.y,
					i = Date.now(),
					s, o, u;
				if (e.animating) return;
				if (!e.steps.length) {
					e._resetPos(400);
					return
				}
				s = e.steps.shift();
				if (s.x == t && s.y == r) s.time = 0;
				e.animating = true;
				e.moved = true;
				if (e.options.useTransition) {
					e._transitionTime(s.time);
					e._pos(s.x, s.y);
					e.animating = false;
					if (s.time) e._bind(T);
					else e._resetPos(0);
					return
				}
				u = function() {
					var a = Date.now(),
						f, l;
					if (a >= i + s.time) {
						e._pos(s.x, s.y);
						e.animating = false;
						if (e.options.onAnimationEnd) e.options.onAnimationEnd.call(e);
						e._startAni();
						return
					}
					a = (a - i) / s.time - 1;
					o = n.sqrt(1 - a * a);
					f = (s.x - t) * o + t;
					l = (s.y - r) * o + r;
					e._pos(f, l);
					if (e.animating) e.aniTime = N(u)
				};
				u()
			},
			_transitionTime: function(e) {
				e += "ms";
				this.scroller.style[a] = e;
				if (this.hScrollbar) this.hScrollbarIndicator.style[a] = e;
				if (this.vScrollbar) this.vScrollbarIndicator.style[a] = e
			},
			_momentum: function(e, t, r, i, s) {
				var o = 6e-4,
					u = n.abs(e) / t,
					a = u * u / (2 * o),
					f = 0,
					l = 0;
				if (e > 0 && a > r) {
					l = s / (6 / (a / u * o));
					r = r + l;
					u = u * r / a;
					a = r
				} else if (e < 0 && a > i) {
					l = s / (6 / (a / u * o));
					i = i + l;
					u = u * i / a;
					a = i
				}
				a = a * (e < 0 ? -1 : 1);
				f = u / o;
				return {
					dist: a,
					time: n.round(f)
				}
			},
			_offset: function(e) {
				var t = -e.offsetLeft,
					n = -e.offsetTop;
				while (e = e.offsetParent) {
					t -= e.offsetLeft;
					n -= e.offsetTop
				}
				if (e != this.wrapper) {
					t *= this.scale;
					n *= this.scale
				}
				return {
					left: t,
					top: n
				}
			},
			_snap: function(e, t) {
				var r = this,
					i, s, o, u, a, f;
				o = r.pagesX.length - 1;
				s = r.pagesX.length;
				for (i = 0; i < s; i++) {
					if (e >= r.pagesX[i]) {
						o = i;
						break
					}
				}
				if (o == r.currPageX && o > 0 && r.dirX < 0) o--;
				e = r.pagesX[o];
				a = n.abs(e - r.pagesX[r.currPageX]);
				a = a ? n.abs(r.x - e) / a * 500 : 0;
				r.currPageX = o;
				o = r.pagesY.length - 1;
				for (i = 0; i < o; i++) {
					if (t >= r.pagesY[i]) {
						o = i;
						break
					}
				}
				if (o == r.currPageY && o > 0 && r.dirY < 0) o--;
				t = r.pagesY[o];
				f = n.abs(t - r.pagesY[r.currPageY]);
				f = f ? n.abs(r.y - t) / f * 500 : 0;
				r.currPageY = o;
				u = n.round(n.max(a, f)) || 200;
				return {
					x: e,
					y: t,
					time: u
				}
			},
			_bind: function(e, t, n) {
				if (this.scroller.addEventListener)(t || this.scroller).addEventListener(e, this, !!n);
				else(t || this.scroller).attachEvent(e, this, !!n)
			},
			_unbind: function(e, t, n) {
				if (this.scroller.removeEventListener)(t || this.scroller).removeEventListener(e, this, !!n);
				else(t || this.scroller).detachEvent(e, this, !!n)
			},
			destroy: function() {
				var t = this;
				t.scroller.style[o] = "";
				t.hScrollbar = false;
				t.vScrollbar = false;
				t._scrollbar("h");
				t._scrollbar("v");
				t._unbind(b, e);
				t._unbind(w);
				t._unbind(E, e);
				t._unbind(S, e);
				t._unbind(x, e);
				if (!t.options.hasTouch) {
					t._unbind("DOMMouseScroll");
					t._unbind("mousewheel")
				}
				if (t.options.useTransition) t._unbind(T);
				if (t.options.checkDOMChanges) clearInterval(t.checkDOMTime);
				if (t.options.onDestroy) t.options.onDestroy.call(t)
			},
			refresh: function() {
				var e = this,
					t, r, i, s, o = 0,
					u = 0;
				if (e.scale < e.options.zoomMin) e.scale = e.options.zoomMin;
				e.wrapperW = e.wrapper.clientWidth || 1;
				e.wrapperH = e.wrapper.clientHeight || 1;
				e.minScrollY = -e.options.topOffset || 0;
				e.scrollerW = n.round(e.scroller.offsetWidth * e.scale);
				e.scrollerH = n.round((e.scroller.offsetHeight + e.minScrollY) * e.scale);
				e.maxScrollX = e.wrapperW - e.scrollerW;
				e.maxScrollY = e.wrapperH - e.scrollerH + e.minScrollY;
				e.dirX = 0;
				e.dirY = 0;
				if (e.options.onRefresh) e.options.onRefresh.call(e);
				e.hScroll = e.options.hScroll && e.maxScrollX < 0;
				e.vScroll = e.options.vScroll && (!e.options.bounceLock && !e.hScroll || e.scrollerH > e.wrapperH);
				e.hScrollbar = e.hScroll && e.options.hScrollbar;
				e.vScrollbar = e.vScroll && e.options.vScrollbar && e.scrollerH > e.wrapperH;
				t = e._offset(e.wrapper);
				e.wrapperOffsetLeft = -t.left;
				e.wrapperOffsetTop = -t.top;
				if (typeof e.options.snap == "string") {
					e.pagesX = [];
					e.pagesY = [];
					s = e.scroller.querySelectorAll(e.options.snap);
					i = s.length;
					for (r = 0; r < i; r++) {
						o = e._offset(s[r]);
						o.left += e.wrapperOffsetLeft;
						o.top += e.wrapperOffsetTop;
						e.pagesX[r] = o.left < e.maxScrollX ? e.maxScrollX : o.left * e.scale;
						e.pagesY[r] = o.top < e.maxScrollY ? e.maxScrollY : o.top * e.scale
					}
				} else if (e.options.snap) {
					e.pagesX = [];
					while (o >= e.maxScrollX) {
						e.pagesX[u] = o;
						o = o - e.wrapperW;
						u++
					}
					if (e.maxScrollX % e.wrapperW) e.pagesX[e.pagesX.length] = e.maxScrollX - e.pagesX[e.pagesX.length - 1] + e.pagesX[e.pagesX.length - 1];
					o = 0;
					u = 0;
					e.pagesY = [];
					while (o >= e.maxScrollY) {
						e.pagesY[u] = o;
						o = o - e.wrapperH;
						u++
					}
					if (e.maxScrollY % e.wrapperH) e.pagesY[e.pagesY.length] = e.maxScrollY - e.pagesY[e.pagesY.length - 1] + e.pagesY[e.pagesY.length - 1]
				}
				e._scrollbar("h");
				e._scrollbar("v");
				if (!e.zoomed) {
					e.scroller.style[a] = "0";
					e._resetPos(400)
				}
			},
			scrollTo: function(e, t, n, r) {
				var i = this,
					s = e,
					o, u;
				i.stop();
				if (!s.length) s = [{
					x: e,
					y: t,
					time: n,
					relative: r
				}];
				u = s.length;
				for (o = 0; o < u; o++) {
					if (s[o].relative) {
						s[o].x = i.x - s[o].x;
						s[o].y = i.y - s[o].y
					}
					i.steps.push({
						x: s[o].x,
						y: s[o].y,
						time: s[o].time || 0
					})
				}
				i._startAni()
			},
			scrollToElement: function(e, t) {
				var r = this,
					i;
				e = e.nodeType ? e : r.scroller.querySelector(e);
				if (!e) return;
				i = r._offset(e);
				i.left += r.wrapperOffsetLeft;
				i.top += r.wrapperOffsetTop;
				i.left = i.left > 0 ? 0 : i.left < r.maxScrollX ? r.maxScrollX : i.left;
				i.top = i.top > r.minScrollY ? r.minScrollY : i.top < r.maxScrollY ? r.maxScrollY : i.top;
				t = t === undefined ? n.max(n.abs(i.left) * 2, n.abs(i.top) * 2) : t;
				r.scrollTo(i.left, i.top, t)
			},
			scrollToPage: function(e, t, n) {
				var r = this,
					i, s;
				n = n === undefined ? 400 : n;
				if (r.options.onScrollStart) r.options.onScrollStart.call(r);
				if (r.options.snap) {
					e = e == "next" ? r.currPageX + 1 : e == "prev" ? r.currPageX - 1 : e;
					t = t == "next" ? r.currPageY + 1 : t == "prev" ? r.currPageY - 1 : t;
					e = e < 0 ? 0 : e > r.pagesX.length - 1 ? r.pagesX.length - 1 : e;
					t = t < 0 ? 0 : t > r.pagesY.length - 1 ? r.pagesY.length - 1 : t;
					r.currPageX = e;
					r.currPageY = t;
					i = r.pagesX[e];
					s = r.pagesY[t]
				} else {
					i = -r.wrapperW * e;
					s = -r.wrapperH * t;
					if (i < r.maxScrollX) i = r.maxScrollX;
					if (s < r.maxScrollY) s = r.maxScrollY
				}
				r.scrollTo(i, s, n)
			},
			disable: function() {
				this.stop();
				this._resetPos(0);
				this.enabled = false;
				this._unbind(E, e);
				this._unbind(S, e);
				this._unbind(x, e)
			},
			enable: function() {
				this.enabled = true
			},
			stop: function() {
				if (this.options.useTransition) this._unbind(T);
				else C(this.aniTime);
				this.steps = [];
				this.moved = false;
				this.animating = false
			},
			zoom: function(e, t, n, r) {
				var i = this,
					s = n / i.scale;
				if (!i.options.useTransform) return;
				i.zoomed = true;
				r = r === undefined ? 200 : r;
				e = e - i.wrapperOffsetLeft - i.x;
				t = t - i.wrapperOffsetTop - i.y;
				i.x = e - e * s + i.x;
				i.y = t - t * s + i.y;
				i.scale = n;
				i.refresh();
				i.x = i.x > 0 ? 0 : i.x < i.maxScrollX ? i.maxScrollX : i.x;
				i.y = i.y > i.minScrollY ? i.minScrollY : i.y < i.maxScrollY ? i.maxScrollY : i.y;
				if (i.keepInCenterH) {
					if (i.scrollerW < i.wrapperW) {
						i.x = (i.wrapperW - i.scrollerW) / 2
					}
				}
				if (i.keepInCenterV) {
					if (i.scrollerH < i.wrapperH) {
						i.y = (i.wrapperH - i.scrollerH) / 2
					}
				}
				i.scroller.style[a] = r + "ms";
				i.scroller.style[o] = "translate(" + i.x + "px," + i.y + "px) scale(" + n + ")" + k;
				i.zoomed = false
			},
			isReady: function() {
				return !this.moved && !this.zoomed && !this.animating
			},
			setX: function(e) {
				this.x = e
			}
		};
		r = null;
		if (typeof exports !== "undefined") exports.iScroll = L;
		else e.iScroll = L
	})(window, document)
} {
	var MOD3 = MOD3 || {};
	(function(e) {
		e.Constants = {
			PI: Math.PI,
			invPI: 1 / Math.PI,
			halfPI: .5 * Math.PI,
			doublePI: 2 * Math.PI,
			toRad: 1 / 180 * Math.PI,
			toDeg: 1 / 180 * Math.PI
		};
		e.ModConstant = {
			LEFT: -1,
			RIGHT: 1,
			NONE: 0,
			X: 1,
			Y: 2,
			Z: 4
		}
	})(MOD3);
	(function(e) {
		var t = e.Constants;
		e.XMath = {};
		e.XMath.normalize = function(t, n, r) {
			return n - t == 0 ? 1 : e.XMath.trim(0, 1, (r - t) / n)
		};
		e.XMath.toRange = function(e, t, n) {
			return t - e == 0 ? 0 : e + (t - e) * n
		};
		e.XMath.inRange = function(e, t, n, r) {
			typeof r == "undefined" && (r = !1);
			return r ? n >= e && n <= t : n > e && n < t
		};
		e.XMath.sign = function(e, t) {
			typeof t == "undefined" && (t = 0);
			return 0 == e ? t : e > 0 ? 1 : -1
		};
		e.XMath.trim = function(e, t, n) {
			return Math.min(t, Math.max(e, n))
		};
		e.XMath.wrap = function(e, t, n) {
			return n < e ? n + (t - e) : n >= t ? n - (t - e) : n
		};
		e.XMath.degToRad = function(e) {
			return e * t.toRad
		};
		e.XMath.radToDeg = function(e) {
			return e * t.toDeg
		};
		e.XMath.presicion = function(e, t) {
			var n = Math.pow(10, t);
			return Math.round(e * n) / n
		};
		e.XMath.uceil = function(e) {
			return e < 0 ? Math.floor(e) : Math.ceil(e)
		}
	})(MOD3);
	(function(e) {
		e.Range = function(e, t) {
			this.start = 0;
			this.end = 1;
			if (typeof e != "undefined") this.start = e;
			if (typeof t != "undefined") this.end = t
		};
		e.Range.prototype.getSize = function() {
			return this.end - this.start
		};
		e.Range.prototype.move = function(e) {
			this.start += e;
			this.end += e
		};
		e.Range.prototype.isIn = function(e) {
			return e >= this.start && e <= this.end
		};
		e.Range.prototype.normalize = function(t) {
			return e.XMath.normalize(this.start, this.end, t)
		};
		e.Range.prototype.toRange = function(t) {
			return e.XMath.toRange(this.start, this.end, t)
		};
		e.Range.prototype.trim = function(t) {
			return e.XMath.trim(this.start, this.end, t)
		};
		e.Range.prototype.interpolate = function(e, t) {
			return this.toRange(t.normalize(e))
		};
		e.Range.prototype.toString = function() {
			return "[" + this.start + " - " + this.end + "]"
		}
	})(MOD3);
	(function(e) {
		e.Phase = function(e) {
			this.value = 0;
			if (typeof e != "undefined") this.value = e
		};
		e.Phase.prototype.getPhasedValue = function() {
			return Math.sin(this.value)
		};
		e.Phase.prototype.getAbsPhasedValue = function() {
			return Math.abs(this.getPhasedValue())
		};
		e.Phase.prototype.getNormValue = function() {
			return (this.getPhasedValue() + 1) * .5
		}
	})(MOD3);
	(function(e) {
		e.Point = function(e, t) {
			this.y = this.x = 0;
			if (typeof e != "undefined") this.x = e;
			if (typeof t != "undefined") this.y = t
		};
		e.Point.prototype.clone = function() {
			return new e.Point(this.x, this.y)
		}
	})(MOD3);
	(function(e) {
		e.Matrix = function(e, t, n, r) {
			this.m11 = 1;
			this.m21 = this.m12 = 0;
			this.m22 = 1;
			if (typeof e != "undefined") this.m11 = e;
			if (typeof t != "undefined") this.m12 = t;
			if (typeof n != "undefined") this.m21 = n;
			if (typeof r != "undefined") this.m22 = r
		};
		e.Matrix.prototype.rotate = function(e) {
			var t = Math.cos(e),
				e = Math.sin(e);
			this.m11 = t;
			this.m12 = -e;
			this.m21 = e;
			this.m22 = t;
			return this
		};
		e.Matrix.prototype.scale = function(e, t) {
			this.m21 = this.m12 = 0;
			if (typeof e != "undefined") this.m22 = this.m11 = e;
			if (typeof t != "undefined") this.m22 = t;
			return this
		};
		e.Matrix.prototype.multiply = function(e) {
			var t = this.m11,
				n = this.m12,
				r = this.m21,
				i = this.m22,
				s = e.m11,
				o = e.m12,
				u = e.m21,
				e = e.m22;
			this.m11 = t * s + n * u;
			this.m12 = t * o + n * e;
			this.m21 = r * s + i * u;
			this.m22 = r * o + i * e;
			return this
		};
		e.Matrix.prototype.transformPoint = function(t) {
			return new e.Point(this.m11 * t.x + this.m12 * t.y, this.m21 * t.x + this.m22 * t.y)
		}
	})(MOD3);
	(function(e) {
		e.Vector3 = function(e, t, n) {
			this.z = this.y = this.x = null;
			this.x = e;
			this.y = t;
			this.z = n
		};
		e.Vector3.ZERO = function() {
			return new e.Vector3(0, 0, 0)
		};
		e.Vector3.dot = function(e, t) {
			return e.x * t.x + e.y * t.y + e.z * t.z
		};
		e.Vector3.prototype.clone = function() {
			return new e.Vector3(this.x, this.y, this.z)
		};
		e.Vector3.prototype.equals = function(e) {
			return this.x == e.x && this.y == e.y && this.z == e.z
		};
		e.Vector3.prototype.zero = function() {
			this.x = this.y = this.z = 0
		};
		e.Vector3.prototype.negate = function() {
			return new e.Vector3(-this.x, -this.y, -this.z)
		};
		e.Vector3.prototype.add = function(t) {
			return new e.Vector3(this.x + t.x, this.y + t.y, this.z + t.z)
		};
		e.Vector3.prototype.subtract = function(t) {
			return new e.Vector3(this.x - t.x, this.y - t.y, this.z - t.z)
		};
		e.Vector3.prototype.multiplyScalar = function(t) {
			return new e.Vector3(this.x * t, this.y * t, this.z * t)
		};
		e.Vector3.prototype.multiply = function(t) {
			return new e.Vector3(this.x * t.x, this.y * t.y, this.z * t.z)
		};
		e.Vector3.prototype.divide = function(t) {
			t = 1 / t;
			return new e.Vector3(this.x * t, this.y * t, this.z * t)
		};
		e.Vector3.prototype.normalize = function() {
			var e = this.x,
				t = this.y,
				n = this.z,
				e = e * e + t * t + n * n;
			e > 0 && (e = 1 / Math.sqrt(e), this.x *= e, this.y *= e, this.z *= e)
		};
		e.Vector3.prototype.getMagnitude = function() {
			var e = this.x,
				t = this.y,
				n = this.z;
			return Math.sqrt(e * e + t * t + n * n)
		};
		e.Vector3.prototype.setMagnitude = function(e) {
			this.normalize();
			this.x *= e;
			this.y *= e;
			this.z *= e
		};
		e.Vector3.prototype.toString = function() {
			return "[" + this.x + " , " + this.y + " , " + this.z + "]"
		};
		e.Vector3.prototype.sum = function(e, t) {
			return e.add(t)
		};
		e.Vector3.prototype.dot = function(e, t) {
			return e.x * t.x + e.y * t.y + e.z * t.z
		};
		e.Vector3.prototype.cross = function(t, n) {
			var r = t.x,
				i = t.y,
				s = t.z,
				o = n.x,
				u = n.y,
				f = n.z;
			return new e.Vector3(i * f - s * u, s * o - r * f, r * u - i * o)
		};
		e.Vector3.prototype.distance = function(e, t) {
			var n = e.x - t.x,
				r = e.y - t.y,
				i = e.z - t.z;
			return Math.sqrt(n * n + r * r + i * i)
		}
	})(MOD3);
	(function(e) {
		e.Matrix4 = function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v) {
			this.n11 = 1;
			this.n21 = this.n14 = this.n13 = this.n12 = 0;
			this.n22 = 1;
			this.n32 = this.n31 = this.n24 = this.n23 = 0;
			this.n33 = 1;
			this.n43 = this.n42 = this.n41 = this.n34 = 0;
			this.n44 = 1;
			if (typeof e != "undefined") this.n11 = e;
			if (typeof t != "undefined") this.n12 = t;
			if (typeof n != "undefined") this.n13 = n;
			if (typeof r != "undefined") this.n14 = r;
			if (typeof i != "undefined") this.n21 = i;
			if (typeof s != "undefined") this.n22 = s;
			if (typeof o != "undefined") this.n23 = o;
			if (typeof u != "undefined") this.n24 = u;
			if (typeof a != "undefined") this.n31 = a;
			if (typeof f != "undefined") this.n32 = f;
			if (typeof l != "undefined") this.n33 = l;
			if (typeof c != "undefined") this.n34 = c;
			if (typeof h != "undefined") this.n41 = h;
			if (typeof p != "undefined") this.n42 = p;
			if (typeof d != "undefined") this.n43 = d;
			if (typeof v != "undefined") this.n44 = v
		};
		e.Matrix4.prototype.translationMatrix = function(e, t, n) {
			this.n14 = e;
			this.n24 = t;
			this.n34 = n;
			return this
		};
		e.Matrix4.prototype.scaleMatrix = function(e, t, n) {
			this.n11 = e;
			this.n22 = t;
			this.n33 = n;
			return this
		};
		e.Matrix4.prototype.rotationMatrix = function(e, t, n, r) {
			var i = Math.cos(r),
				s = Math.sin(r),
				r = 1 - i,
				o = e * t * r,
				u = t * n * r,
				a = e * n * r,
				f = s * n,
				l = s * t;
			s *= e;
			this.n11 = i + e * e * r;
			this.n12 = -f + o;
			this.n13 = l + a;
			this.n14 = 0;
			this.n21 = f + o;
			this.n22 = i + t * t * r;
			this.n23 = -s + u;
			this.n24 = 0;
			this.n31 = -l + a;
			this.n32 = s + u;
			this.n33 = i + n * n * r;
			this.n34 = 0;
			return this
		};
		e.Matrix4.prototype.calculateMultiply = function(e, t) {
			var n = e.n11,
				r = t.n11,
				i = e.n21,
				s = t.n21,
				o = e.n31,
				u = t.n31,
				a = e.n12,
				f = t.n12,
				l = e.n22,
				c = t.n22,
				h = e.n32,
				p = t.n32,
				d = e.n13,
				v = t.n13,
				m = e.n23,
				g = t.n23,
				y = e.n33,
				b = t.n33,
				w = e.n14,
				E = t.n14,
				S = e.n24,
				x = t.n24,
				T = e.n34,
				N = t.n34;
			this.n11 = n * r + a * s + d * u;
			this.n12 = n * f + a * c + d * p;
			this.n13 = n * v + a * g + d * b;
			this.n14 = n * E + a * x + d * N + w;
			this.n21 = i * r + l * s + m * u;
			this.n22 = i * f + l * c + m * p;
			this.n23 = i * v + l * g + m * b;
			this.n24 = i * E + l * x + m * N + S;
			this.n31 = o * r + h * s + y * u;
			this.n32 = o * f + h * c + y * p;
			this.n33 = o * v + h * g + y * b;
			this.n34 = o * E + h * x + y * N + T
		};
		e.Matrix4.prototype.multiply = function(e, t) {
			this.calculateMultiply(e, t);
			return this
		};
		e.Matrix4.prototype.multiplyVector = function(e, t) {
			var n = t.x,
				r = t.y,
				i = t.z;
			t.x = n * e.n11 + r * e.n12 + i * e.n13 + e.n14;
			t.y = n * e.n21 + r * e.n22 + i * e.n23 + e.n24;
			t.z = n * e.n31 + r * e.n32 + i * e.n33 + e.n34
		}
	})(MOD3);
	(function(e) {
		e.VertexProxy = function(e) {
			this.originalZ = this.originalY = this.originalX = this.ratioZ = this.ratioY = this.ratioX = null;
			if (typeof e != "undefined") this.vertex = e
		};
		e.VertexProxy.prototype.setVertex = function() {};
		e.VertexProxy.prototype.setRatios = function(e, t, n) {
			this.ratioX = e;
			this.ratioY = t;
			this.ratioZ = n
		};
		e.VertexProxy.prototype.setOriginalPosition = function(e, t, n) {
			this.originalX = e;
			this.originalY = t;
			this.originalZ = n
		};
		e.VertexProxy.prototype.getX = function() {};
		e.VertexProxy.prototype.getY = function() {};
		e.VertexProxy.prototype.getZ = function() {};
		e.VertexProxy.prototype.setX = function() {};
		e.VertexProxy.prototype.setY = function() {};
		e.VertexProxy.prototype.setZ = function() {};
		e.VertexProxy.prototype.getValue = function(t) {
			switch (t) {
				case e.ModConstant.X:
					return this.getX();
				case e.ModConstant.Y:
					return this.getY();
				case e.ModConstant.Z:
					return this.getZ()
			}
			return 0
		};
		e.VertexProxy.prototype.setValue = function(t, n) {
			switch (t) {
				case e.ModConstant.X:
					this.setX(n);
					break;
				case e.ModConstant.Y:
					this.setY(n);
					break;
				case e.ModConstant.Z:
					this.setZ(n)
			}
		};
		e.VertexProxy.prototype.getRatio = function(t) {
			switch (t) {
				case e.ModConstant.X:
					return this.ratioX;
				case e.ModConstant.Y:
					return this.ratioY;
				case e.ModConstant.Z:
					return this.ratioZ
			}
			return -1
		};
		e.VertexProxy.prototype.getOriginalValue = function(t) {
			switch (t) {
				case e.ModConstant.X:
					return this.originalX;
				case e.ModConstant.Y:
					return this.originalY;
				case e.ModConstant.Z:
					return this.originalZ
			}
			return 0
		};
		e.VertexProxy.prototype.reset = function() {
			this.setX(this.originalX);
			this.setY(this.originalY);
			this.setZ(this.originalZ)
		};
		e.VertexProxy.prototype.collapse = function() {
			this.originalX = this.getX();
			this.originalY = this.getY();
			this.originalZ = this.getZ()
		};
		e.VertexProxy.prototype.getVector = function() {
			return new e.Vector3(this.getX(), this.getY(), this.getZ())
		};
		e.VertexProxy.prototype.setVector = function(e) {
			this.setX(e.x);
			this.setY(e.y);
			this.setZ(e.z)
		};
		e.VertexProxy.prototype.getRatioVector = function() {
			return new e.Vector3(this.ratioX, this.ratioY, this.ratioZ)
		}
	})(MOD3);
	(function(e) {
		e.FaceProxy = function() {
			this.vertices = []
		};
		e.FaceProxy.prototype.addVertex = function(e) {
			this.vertices.push(e)
		};
		e.FaceProxy.prototype.getVertices = function() {
			return this.vertices
		}
	})(MOD3);
	(function(e) {
		e.MeshProxy = function() {
			this.depth = this.height = this.width = this.minAxis = this.midAxis = this.maxAxis = this.minZ = this.minY = this.minX = this.maxZ = this.maxY = this.maxX = null;
			this.vertices = [];
			this.faces = [];
			this.mesh = null
		};
		e.MeshProxy.prototype.getVertices = function() {
			return this.vertices
		};
		e.MeshProxy.prototype.getFaces = function() {
			return this.faces
		};
		e.MeshProxy.prototype.analyzeGeometry = function() {
			for (var t = this.getVertices(), n = t.length, r = n, i, s, o, u, f, l, c, h, p, d, v = !0, m = Math.min, g = Math.max; --r >= 0;) i = t[r], s = i.getX(), o = i.getY(), u = i.getZ(), v ? (f = l = s, c = h = o, p = d = u, v = !1) : (f = m(f, s), c = m(c, o), p = m(p, u), l = g(l, s), h = g(h, o), d = g(d, u)), i.setOriginalPosition(s, o, u);
			s = l - f;
			o = h - c;
			depth = d - p;
			this.width = s;
			this.height = o;
			this.depth = depth;
			this.minX = f;
			this.maxX = l;
			this.minY = c;
			this.maxY = h;
			this.minZ = p;
			this.maxZ = d;
			r = g(s, g(o, depth));
			m = m(s, m(o, depth));
			if (r == s && m == o) this.minAxis = e.ModConstant.Y, this.midAxis = e.ModConstant.Z, this.maxAxis = e.ModConstant.X;
			else if (r == s && m == depth) this.minAxis = e.ModConstant.Z, this.midAxis = e.ModConstant.Y, this.maxAxis = e.ModConstant.X;
			else if (r == o && m == s) this.minAxis = e.ModConstant.X, this.midAxis = e.ModConstant.Z, this.maxAxis = e.ModConstant.Y;
			else if (r == o && m == depth) this.minAxis = e.ModConstant.Z, this.midAxis = e.ModConstant.X, this.maxAxis = e.ModConstant.Y;
			else if (r == depth && m == s) this.minAxis = e.ModConstant.X, this.midAxis = e.ModConstant.Y, this.maxAxis = e.ModConstant.Z;
			else if (r == depth && m == o) this.minAxis = e.ModConstant.Y, this.midAxis = e.ModConstant.X, this.maxAxis = e.ModConstant.Z;
			for (r = n; --r >= 0;) i = t[r], i.setRatios((i.getX() - f) / s, (i.getY() - c) / o, (i.getZ() - p) / depth)
		};
		e.MeshProxy.prototype.resetGeometry = function() {
			for (var e = this.getVertices(), t = e.length; --t >= 0;) e[t].reset()
		};
		e.MeshProxy.prototype.collapseGeometry = function() {
			for (var e = this.getVertices(), t = e.length; --t >= 0;) e[t].collapse();
			this.analyzeGeometry()
		};
		e.MeshProxy.prototype.getMin = function(t) {
			switch (t) {
				case e.ModConstant.X:
					return this.minX;
				case e.ModConstant.Y:
					return this.minY;
				case e.ModConstant.Z:
					return this.minZ
			}
			return -1
		};
		e.MeshProxy.prototype.getMax = function(t) {
			switch (t) {
				case e.ModConstant.X:
					return this.maxX;
				case e.ModConstant.Y:
					return this.maxY;
				case e.ModConstant.Z:
					return this.maxZ
			}
			return -1
		};
		e.MeshProxy.prototype.getSize = function(t) {
			switch (t) {
				case e.ModConstant.X:
					return this.width;
				case e.ModConstant.Y:
					return this.height;
				case e.ModConstant.Z:
					return this.depth
			}
			return -1
		};
		e.MeshProxy.prototype.setMesh = function(e) {
			this.mesh = e;
			this.vertices = [];
			this.faces = []
		};
		e.MeshProxy.prototype.postApply = function() {};
		e.MeshProxy.prototype.updateMeshPosition = function() {}
	})(MOD3);
	(function(e) {
		e.Modifier = function() {
			this.mod = null
		};
		e.Modifier.prototype.setModifiable = function(e) {
			this.mod = e
		};
		e.Modifier.prototype.getVertices = function() {
			return this.mod.getVertices()
		};
		e.Modifier.prototype.apply = function() {}
	})(MOD3);
	(function(e) {
		e.Library3d = function() {
			this.id = "";
			this.vertexClass = this.meshClass = null
		}
	})(MOD3);
	(function(e) {
		e.PluginFactory = {};
		e.PluginFactory.getMeshProxy = function(e) {
			return new e.meshClass
		}
	})(MOD3);
	(function(e) {
		e.ModifierStack = function(t, n) {
			this.lib3d = t;
			this.stack = this.baseMesh = null;
			this.baseMesh = e.PluginFactory.getMeshProxy(t);
			this.baseMesh.setMesh(n);
			this.baseMesh.analyzeGeometry();
			this.stack = []
		};
		e.ModifierStack.prototype.addModifier = function(e) {
			e.setModifiable(this.baseMesh);
			this.stack.push(e)
		};
		e.ModifierStack.prototype.apply = function() {
			this.baseMesh.resetGeometry();
			for (var e = this.stack, t = e.length, n = 0; n < t;) e[n++].apply();
			this.baseMesh.postApply()
		};
		e.ModifierStack.prototype.collapse = function() {
			this.apply();
			this.baseMesh.collapseGeometry();
			this.stack = []
		};
		e.ModifierStack.prototype.clear = function() {
			this.stack = []
		};
		e.ModifierStack.prototype.getMeshInfo = function() {
			return this.baseMesh
		}
	})(MOD3);
	(function(e) {
		e.Pivot = function(t, n, r) {
			this.pivot = new e.Vector3(t, n, r)
		};
		e.Pivot.prototype = new e.Modifier;
		e.Pivot.prototype.constructor = e.Pivot;
		e.Pivot.prototype.setMeshCenter = function() {
			var t = this.mod;
			this.pivot = new e.Vector3(-(t.minX + .5 * t.width), -(t.minY + .5 * t.height), -(t.minZ + .5 * t.depth))
		};
		e.Pivot.prototype.apply = function() {
			for (var e = this.mod.getVertices(), t = e.length, n = this.pivot, r, i; --t >= 0;) r = e[t], i = r.getVector().clone(), r.setVector(i.add(n));
			this.mod.updateMeshPosition(n.clone().negate())
		}
	})(MOD3);
	(function(e) {
		e.Bend = function(t, n, r) {
			this.diagAngle = this.angle = this.offset = this.force = null;
			this.constraint = e.ModConstant.NONE;
			this.m2 = this.m1 = this.origin = this.height = this.width = this.mid = this.min = this.max = null;
			this.switchAxes = !1;
			this.force = t;
			this.offset = n;
			this.setAngle(r)
		};
		e.Bend.prototype = new e.Modifier;
		e.Bend.prototype.constructor = e.Bend;
		e.Bend.prototype.setAngle = function(t) {
			this.angle = t;
			this.m1 = new e.Matrix;
			this.m1.rotate(t);
			this.m2 = new e.Matrix;
			this.m2.rotate(-t)
		};
		e.Bend.prototype.setModifiable = function(t) {
			e.Modifier.prototype.setModifiable.call(this, t);
			this.max = this.switchAxes ? this.mod.midAxis : this.mod.maxAxis;
			this.min = this.mod.minAxis;
			this.mid = this.switchAxes ? this.mod.maxAxis : this.mod.midAxis;
			this.width = this.mod.getSize(this.max);
			this.height = this.mod.getSize(this.mid);
			this.origin = this.mod.getMin(this.max);
			this.diagAngle = Math.atan(this.width / this.height)
		};
		e.Bend.prototype.apply = function() {
			if (this.force != 0)
				for (var t = this.mod.getVertices(), n = t.length, r = this.width, i = this.offset, s = this.origin, o = this.max, u = this.min, f = this.mid, l = this.m1, c = this.m2, h = s + r * i, p = r / Math.PI / this.force, d = e.Constants.doublePI * (r / (p * e.Constants.doublePI)), v, m, g, y, b = 1 / r, w = e.Constants.halfPI, E = Math.sin, S = Math.cos; --n >= 0;) r = t[n], v = r.getValue(o), m = r.getValue(f), g = r.getValue(u), m = l.transformPoint(new e.Point(v, m)), v = m.x, m = m.y, y = (v - s) * b, this.constraint == e.ModConstant.LEFT && y <= i || this.constraint == e.ModConstant.RIGHT && y >= i || (y = w - d * i + d * y, v = E(y) * (p + g), y = S(y) * (p + g), g = v - p, v = h - y), m = c.transformPoint(new e.Point(v, m)), v = m.x, m = m.y, r.setValue(o, v), r.setValue(f, m), r.setValue(u, g)
		}
	})(MOD3);
	(function(e) {
		e.Bloat = function() {
			this.center = e.Vector3.ZERO();
			this.radius = 0;
			this.a = .01;
			this.u = e.Vector3.ZERO()
		};
		e.Bloat.prototype = new e.Modifier;
		e.Bloat.prototype.constructor = e.Bloat;
		e.Bloat.prototype.setRadius = function(e) {
			this.radius = Math.max(0, e)
		};
		e.Bloat.prototype.setA = function(e) {
			this.a = Math.max(0, e)
		};
		e.Bloat.prototype.apply = function() {
			for (var e = this.mod.getVertices(), t = e.length, n = this.center, r = this.radius, i = this.a, s, o; --t >= 0;) s = e[t], this.u.x = s.getX() - n.x, this.u.y = s.getY() - n.y, this.u.z = s.getZ() - n.z, o = this.u.getMagnitude(), this.u.setMagnitude(o + r * Math.exp(-o * i)), s.setX(this.u.x + n.x), s.setY(this.u.y + n.y), s.setZ(this.u.z + n.z)
		}
	})(MOD3);
	(function(e) {
		e.Twist = function(t) {
			this.vector = new e.Vector3(0, 1, 0);
			this.angle = t;
			this.center = e.Vector3.ZERO()
		};
		e.Twist.prototype = new e.Modifier;
		e.Twist.prototype.constructor = e.Twist;
		e.Twist.prototype.apply = function() {
			this.vector.normalize();
			for (var t = this.mod, n = t.getVertices(), r = n.length, i = this.vector, s = this.angle, o = this.center, t = 1 / (new e.Vector3(.5 * t.maxX, .5 * t.maxY, .5 * t.maxZ)).getMagnitude() * s, o = -e.Vector3.dot(i, o), u; --r >= 0;) s = n[r], u = s.getX() * i.x + s.getY() * i.y + s.getZ() * i.z + o, this.twistPoint(s, u * t)
		};
		e.Twist.prototype.twistPoint = function(t, n) {
			var r = (new e.Matrix4).translationMatrix(t.getX(), t.getY(), t.getZ()),
				r = (new e.Matrix4).multiply((new e.Matrix4).rotationMatrix(this.vector.x, this.vector.y, this.vector.z, n), r);
			t.setX(r.n14);
			t.setY(r.n24);
			t.setZ(r.n34)
		}
	})(MOD3);
	(function(e) {
		e.Skew = function(t) {
			this.force = 0;
			this.skewAxis = null;
			if (typeof t != "undefined") this.force = t;
			this.offset = .5;
			this.constraint = e.ModConstant.NONE;
			this.falloff = this.power = 1;
			this.swapAxes = this.oneSide = this.inverseFalloff = !1
		};
		e.Skew.prototype = new e.Modifier;
		e.Skew.prototype.constructor = e.Skew;
		e.Skew.prototype.setModifiable = function(t) {
			e.Modifier.prototype.setModifiable.call(this, t);
			this.skewAxis = this.skewAxis || this.mod.maxAxis
		};
		e.Skew.prototype.apply = function() {
			for (var t = this.mod.getVertices(), n = t.length, r = this.constraint, i = this.skewAxis, s = this.offset, o = this.oneSide, u = this.inverseFalloff, f = this.falloff, l = 1 - f, c = this.power, h = this.force, p = this.getDisplaceAxis(), d, v, m; --n >= 0;) d = t[n], !(r == e.ModConstant.LEFT && d.getRatio(i) <= s) && !(r == e.ModConstant.RIGHT && d.getRatio(i) > s) && (v = d.getRatio(i) - s, o && (v = Math.abs(v)), m = d.getRatio(p), u && (m = 1 - m), m = f + m * l, v = Math.pow(Math.abs(v), c) * e.XMath.sign(v, 1), v = d.getValue(p) + h * v * m, d.setValue(p, v))
		};
		e.Skew.prototype.getDisplaceAxis = function() {
			switch (this.skewAxis) {
				case e.ModConstant.X:
					return this.swapAxes ? e.ModConstant.Z : e.ModConstant.Y;
				case e.ModConstant.Y:
					return this.swapAxes ? e.ModConstant.Z : e.ModConstant.X;
				case e.ModConstant.Z:
					return this.swapAxes ? e.ModConstant.Y : e.ModConstant.X;
				default:
					return 0
			}
		}
	})(MOD3);
	(function(e) {
		e.Taper = function(t) {
			this.power = this.force = null;
			this.start = 0;
			this.end = 1;
			this.vector = new e.Vector3(1, 0, 1);
			this.vector2 = new e.Vector3(0, 1, 0);
			if (typeof t != "undefined") this.force = t;
			this.power = 1
		};
		e.Taper.prototype = new e.Modifier;
		e.Taper.prototype.constructor = e.Taper;
		e.Taper.prototype.setFalloff = function(e, t) {
			this.start = 0;
			this.end = 1;
			if (typeof e != "undefined") this.start = e;
			if (typeof t != "undefined") this.end = t
		};
		e.Taper.prototype.apply = function() {
			for (var t = this.mod.getVertices(), n = t.length, r = this.vector, i = this.vector2, s = this.force, o = this.power, u, f, l; --n >= 0;) u = t[n], f = u.getRatioVector().multiply(i), f = s * Math.pow(f.getMagnitude(), o), f = (new e.Matrix4).scaleMatrix(1 + f * r.x, 1 + f * r.y, 1 + f * r.z), l = u.getVector(), (new e.Matrix4).multiplyVector(f, l), u.setVector(l)
		}
	})(MOD3);
	(function(e) {
		e.Wheel = function() {
			this.radius = this.roll = this.turn = this.speed = null;
			this.steerVector = new e.Vector3(0, 1, 0);
			this.rollVector = new e.Vector3(0, 0, 1);
			this.roll = this.turn = this.speed = 0
		};
		e.Wheel.prototype = new e.Modifier;
		e.Wheel.prototype.constructor = e.Wheel;
		e.Wheel.prototype.setModifiable = function(t) {
			e.Modifier.prototype.setModifiable.call(this, t);
			this.radius = .5 * this.mod.width
		};
		e.Wheel.prototype.apply = function() {
			this.roll += this.speed;
			var t = this.mod.getVertices(),
				n = t.length,
				r = this.steerVector,
				i = this.turn,
				s = this.rollVector,
				o = this.roll,
				u;
			0 != i ? (u = (new e.Matrix4).rotationMatrix(r.x, r.y, r.z, i), r = s.clone(), (new e.Matrix4).multiplyVector(u, r), o = (new e.Matrix4).rotationMatrix(r.x, r.y, r.z, o)) : o = (new e.Matrix4).rotationMatrix(s.x, s.y, s.z, o);
			for (; --n >= 0;) r = t[n], s = r.getVector().clone(), 0 != i && (new e.Matrix4).multiplyVector(u, s), (new e.Matrix4).multiplyVector(o, s), r.setX(s.x), r.setY(s.y), r.setZ(s.z)
		};
		e.Wheel.prototype.getStep = function() {
			return this.radius * this.speed * e.Constants.invPI
		};
		e.Wheel.prototype.getPerimeter = function() {
			return this.radius * e.Constants.doublePI
		}
	})(MOD3);
	(function(e) {
		e.Break = function(t, n) {
			this.bv = new e.Vector3(0, 1, 0);
			this.angle = this.offset = 0;
			if (typeof t != "undefined") this.offset = t;
			if (typeof n != "undefined") this.angle = n;
			this.range = new e.Range(0, 1)
		};
		e.Break.prototype = new e.Modifier;
		e.Break.prototype.constructor = e.Break;
		e.Break.prototype.apply = function() {
			var t = this.mod,
				n = t.getVertices(),
				r = n.length,
				i = this.range,
				s = this.angle,
				o = this.bv,
				u, f, t = new e.Vector3(0, 0, -(t.minZ + t.depth * this.offset));
			u = t.negate();
			for (f = (new e.Matrix4).rotationMatrix(o.x, o.y, o.z, s); --r >= 0;) s = n[r], o = s.getVector(), o = o.add(t), o.z >= 0 && i.isIn(s.ratioY) && (new e.Matrix4).multiplyVector(f, o), o = o.add(u), s.setX(o.x), s.setY(o.y), s.setZ(o.z)
		}
	})(MOD3);
	(function(e) {
		e.Noise = function(t) {
			this.force = 0;
			this.axc = e.ModConstant.NONE;
			this.end = this.start = 0;
			if (typeof t != "undefined") this.force = t
		};
		e.Noise.prototype = new e.Modifier;
		e.Noise.prototype.constructor = e.Noise;
		e.Noise.prototype.constraintAxes = function(e) {
			this.axc = e
		};
		e.Noise.prototype.setFalloff = function(e, t) {
			this.start = 0;
			this.end = 1;
			if (typeof e != "undefined") this.start = e;
			if (typeof t != "undefined") this.end = t
		};
		e.Noise.prototype.apply = function() {
			for (var e = this.mod, t = this.axc, n = this.start, r = this.end, i = e.getVertices(), s = i.length, o = this.force, u = .5 * o, a = Math.random, f, l, c; --s >= 0;) f = i[s], l = a() * o - u, c = f.getRatio(e.maxAxis), n < r ? (c < n && (c = 0), c > r && (c = 1)) : n > r ? (c = 1 - c, c > n && (c = 0), c < r && (c = 1)) : c = 1, t & 1 || f.setX(f.getX() + l * c), t >> 1 & 1 || f.setY(f.getY() + l * c), t >> 2 & 1 || f.setZ(f.getZ() + l * c)
		}
	})(MOD3);
	(function(e) {
		e.LibraryThree = function() {
			this.id = "Three.js";
			this.meshClass = e.MeshThree;
			this.vertexClass = e.VertexThree
		};
		e.LibraryThree.prototype = new e.Library3d;
		e.LibraryThree.prototype.constructor = e.LibraryThree
	})(MOD3);
	(function(e) {
		e.VertexThree = function(e) {
			this.mesh = e
		};
		e.VertexThree.prototype = new e.VertexProxy;
		e.VertexThree.prototype.setVertex = function(e) {
			this.vertex = e;
			this.originalX = e.x;
			this.originalY = e.y;
			this.originalZ = e.z
		};
		e.VertexThree.prototype.getX = function() {
			return this.vertex.x
		};
		e.VertexThree.prototype.getY = function() {
			return this.vertex.y
		};
		e.VertexThree.prototype.getZ = function() {
			return this.vertex.z
		};
		e.VertexThree.prototype.setX = function(e) {
			this.vertex.x = e;
			e = this.mesh;
			e.geometry.verticesNeedUpdate = !0;
			e.geometry.normalsNeedUpdate = !0;
			e.geometry.buffersNeedUpdate = !0;
			e.geometry.dynamic = !0
		};
		e.VertexThree.prototype.setY = function(e) {
			this.vertex.y = e;
			e = this.mesh;
			e.geometry.verticesNeedUpdate = !0;
			e.geometry.normalsNeedUpdate = !0;
			e.geometry.buffersNeedUpdate = !0;
			e.geometry.dynamic = !0
		};
		e.VertexThree.prototype.setZ = function(e) {
			this.vertex.z = e;
			e = this.mesh;
			e.geometry.verticesNeedUpdate = !0;
			e.geometry.normalsNeedUpdate = !0;
			e.geometry.buffersNeedUpdate = !0;
			e.geometry.dynamic = !0
		}
	})(MOD3);
	(function(e) {
		e.MeshThree = function() {};
		e.MeshThree.prototype = new e.MeshProxy;
		e.MeshThree.prototype.setMesh = function(t) {
			e.MeshProxy.prototype.setMesh.call(this, t);
			for (var t = [], n = 0, r = this.mesh.geometry.vertices, i = r.length, s = this.mesh.geometry.faces, o = s.length, u, n = 0; n < i;) u = new e.VertexThree(this.mesh), u.setVertex(r[n]), this.vertices.push(u), t[r[n]] = u, n++;
			for (n = 0; n < o;) i = new e.FaceProxy, s[n] instanceof THREE.Face3 ? (i.addVertex(t[r[s[n].a]]), i.addVertex(t[r[s[n].b]]), i.addVertex(t[r[s[n].c]])) : s[n] instanceof THREE.Face4 && (i.addVertex(t[r[s[n].a]]), i.addVertex(t[r[s[n].b]]), i.addVertex(t[r[s[n].c]]), i.addVertex(t[r[s[n].d]])), this.faces.push(i), n++;
			delete lookup
		};
		e.MeshThree.prototype.updateMeshPosition = function(e) {
			var t = this.mesh;
			t.position.x += e.x;
			t.position.y += e.y;
			t.position.z += e.z
		}
	})(MOD3);
	(function(e) {
		e.LibraryPre3D = function() {
			this.id = "pre3d.js";
			this.meshClass = e.MeshPre3D;
			this.vertexClass = e.VertexPre3D
		};
		e.LibraryThree.prototype = new e.Library3d;
		e.LibraryThree.prototype.constructor = e.LibraryPre3D
	})(MOD3);
	(function(e) {
		e.VertexPre3D = function() {};
		e.VertexPre3D.prototype = new e.VertexProxy;
		e.VertexPre3D.prototype.setVertex = function(e) {
			this.vertex = e;
			this.originalX = e.x;
			this.originalY = e.y;
			this.originalZ = e.z
		};
		e.VertexPre3D.prototype.getX = function() {
			return this.vertex.x
		};
		e.VertexPre3D.prototype.getY = function() {
			return this.vertex.y
		};
		e.VertexPre3D.prototype.getZ = function() {
			return this.vertex.z
		};
		e.VertexPre3D.prototype.setX = function(e) {
			this.vertex.x = e
		};
		e.VertexPre3D.prototype.setY = function(e) {
			this.vertex.y = e
		};
		e.VertexPre3D.prototype.setZ = function(e) {
			this.vertex.z = e
		}
	})(MOD3);
	(function(e) {
		e.MeshPre3D = function() {};
		e.MeshPre3D.prototype = new e.MeshProxy;
		e.MeshPre3D.prototype.setMesh = function(t) {
			e.MeshProxy.prototype.setMesh.call(this, t);
			for (var t = [], n = this.mesh.vertices, r = this.mesh.quads, i = n.length, s = r.length, o = 0; o < i; o++) {
				var u = new e.VertexPre3D;
				u.setVertex(n[o]);
				this.vertices.push(u);
				t[n[o]] = u
			}
			for (o = 0; o < s; o++) i = new e.FaceProxy, r[o] instanceof Pre3d.QuadFace && (i.addVertex(t[n[r[o].i0]]), i.addVertex(t[n[r[o].i1]]), i.addVertex(t[n[r[o].i2]]), r[o].i3 != null && i.addVertex(t[n[r[o].i3]])), this.faces.push(i);
			delete lookup
		};
		e.MeshPre3D.prototype.updateMeshPosition = function() {}
	})(MOD3);
	(function(e) {
		e.LibraryJ3D = function() {
			this.id = "J3D";
			this.meshClass = e.MeshJ3D;
			this.vertexClass = e.VertexJ3D
		};
		e.LibraryJ3D.prototype = new e.Library3d;
		e.LibraryJ3D.prototype.constructor = e.LibraryJ3D
	})(MOD3);
	(function(e) {
		e.VertexJ3D = function(e) {
			this.geometry = e
		};
		e.VertexJ3D.prototype = new e.VertexProxy;
		e.VertexJ3D.prototype.setVertex = function(e) {
			this.vertex = e;
			var t = this.geometry;
			this.originalX = t.vertexPositionBuffer.data[e];
			this.originalY = t.vertexPositionBuffer.data[e + 1];
			this.originalZ = t.vertexPositionBuffer.data[e + 2]
		};
		e.VertexJ3D.prototype.getX = function() {
			return this.geometry.vertexPositionBuffer.data[this.vertex]
		};
		e.VertexJ3D.prototype.getY = function() {
			return this.geometry.vertexPositionBuffer.data[this.vertex + 1]
		};
		e.VertexJ3D.prototype.getZ = function() {
			return this.geometry.vertexPositionBuffer.data[this.vertex + 2]
		};
		e.VertexJ3D.prototype.setX = function(e) {
			var t = this.geometry;
			t.vertexPositionBuffer.data[this.vertex] = e;
			t.replaceArray(t.vertexPositionBuffer, t.vertexPositionBuffer.data)
		};
		e.VertexJ3D.prototype.setY = function(e) {
			var t = this.geometry;
			t.vertexPositionBuffer.data[this.vertex + 1] = e;
			t.replaceArray(t.vertexPositionBuffer, t.vertexPositionBuffer.data)
		};
		e.VertexJ3D.prototype.setZ = function(e) {
			var t = this.geometry;
			t.vertexPositionBuffer.data[this.vertex + 2] = e;
			t.replaceArray(t.vertexPositionBuffer, t.vertexPositionBuffer.data)
		}
	})(MOD3);
	(function(e) {
		e.MeshJ3D = function() {};
		e.MeshJ3D.prototype = new e.MeshProxy;
		e.MeshJ3D.prototype.setMesh = function(t) {
			e.MeshProxy.prototype.setMesh.call(this, t);
			for (var n = 0, r = t.geometry.vertexPositionBuffer.data.length, i = t.geometry.vertexPositionBuffer.itemSize, s, n = 0; n < r;) s = new e.VertexJ3D(t.geometry), s.setVertex(n), this.vertices.push(s), n += i;
			this.faces = null
		};
		e.MeshJ3D.prototype.updateMeshPosition = function(e) {
			var t = this.mesh;
			t.position.x += e.x;
			t.position.y += e.y;
			t.position.z += e.z
		}
	})(MOD3);
	(function(e) {
		e.LibraryCopperlicht = function() {
			this.id = "Copperlicht";
			this.meshClass = e.MeshCopperlicht;
			this.vertexClass = e.VertexCopperlicht
		};
		e.LibraryCopperlicht.prototype = new e.Library3d;
		e.LibraryCopperlicht.prototype.constructor = e.LibraryCopperlicht
	})(MOD3);
	(function(e) {
		e.VertexCopperlicht = function(e, t) {
			this.node = e;
			this.buffer = t
		};
		e.VertexCopperlicht.prototype = new e.VertexProxy;
		e.VertexCopperlicht.prototype.setVertex = function(e) {
			this.vertex = e;
			this.originalX = this.vertex.Pos.X;
			this.originalY = this.vertex.Pos.Y;
			this.originalZ = this.vertex.Pos.Z
		};
		e.VertexCopperlicht.prototype.getX = function() {
			return this.vertex.Pos.X
		};
		e.VertexCopperlicht.prototype.getY = function() {
			return this.vertex.Pos.Y
		};
		e.VertexCopperlicht.prototype.getZ = function() {
			return this.vertex.Pos.Z
		};
		e.VertexCopperlicht.prototype.setX = function(e) {
			this.vertex.Pos.X = e;
			this.buffer.update(!0)
		};
		e.VertexCopperlicht.prototype.setY = function(e) {
			this.vertex.Pos.Y = e;
			this.buffer.update(!0)
		};
		e.VertexCopperlicht.prototype.setZ = function(e) {
			this.vertex.Pos.Z = e;
			this.buffer.update(!0)
		}
	})(MOD3);
	(function(e) {
		e.MeshCopperlicht = function() {};
		e.MeshCopperlicht.prototype = new e.MeshProxy;
		e.MeshCopperlicht.prototype.setMesh = function(t) {
			e.MeshProxy.prototype.setMesh.call(this, t);
			for (var t = this.mesh.getMesh().GetMeshBuffers(), n = [], r = 0; r < t.length; r++)
				for (var n = t[r].Vertices, i = n.length, s = 0; s < i; s++) {
					var o = new e.VertexCopperlicht(this.mesh, t[r]);
					o.setVertex(n[s]);
					this.vertices.push(o)
				}
			this.faces = null;
			delete lookup
		};
		e.MeshCopperlicht.prototype.updateMeshPosition = function(e) {
			this.mesh.Pos.X += e.x;
			this.mesh.Pos.Y += e.y;
			this.mesh.Pos.Z += e.z
		}
	})(MOD3)
} {
	Detector = {
		canvas: !!window.CanvasRenderingContext2D,
		webgl: function() {
			try {
				return !!window.WebGLRenderingContext && !!document.createElement("canvas").getContext("experimental-webgl")
			} catch (e) {
				return false
			}
		}(),
		workers: !!window.Worker,
		fileapi: window.File && window.FileReader && window.FileList && window.Blob,
		getWebGLErrorMessage: function() {
			var e = document.createElement("div");
			e.id = "webgl-error-message";
			e.style.fontFamily = "monospace";
			e.style.fontSize = "13px";
			e.style.fontWeight = "normal";
			e.style.textAlign = "center";
			e.style.background = "#fff";
			e.style.color = "#000";
			e.style.padding = "1.5em";
			e.style.width = "400px";
			e.style.margin = "5em auto 0";
			if (!this.webgl) {
				e.innerHTML = window.WebGLRenderingContext ? ['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />', 'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n") : ['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>', 'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")
			}
			return e
		},
		addGetWebGLMessage: function(e) {
			var t, n, r;
			e = e || {};
			t = e.parent !== undefined ? e.parent : document.body;
			n = e.id !== undefined ? e.id : "oldie";
			r = Detector.getWebGLErrorMessage();
			r.id = n;
			t.appendChild(r)
		}
	}
} {
	var THREEx = THREEx || {};
	THREEx.FullScreen = THREEx.FullScreen || {};
	THREEx.FullScreen.available = function() {
		return this._hasWebkitFullScreen || this._hasMozFullScreen
	};
	THREEx.FullScreen.activated = function() {
		if (this._hasWebkitFullScreen) {
			return document.webkitIsFullScreen
		} else if (this._hasMozFullScreen) {
			return document.mozFullScreen
		} else {
			console.assert(false)
		}
	};
	THREEx.FullScreen.request = function(e) {
		e = e || document.body;
		if (this._hasWebkitFullScreen) {
			e.webkitRequestFullScreen()
		} else if (this._hasMozFullScreen) {
			e.mozRequestFullScreen()
		} else {
			console.assert(false)
		}
	};
	THREEx.FullScreen.cancel = function() {
		if (this._hasWebkitFullScreen) {
			document.webkitCancelFullScreen()
		} else if (this._hasMozFullScreen) {
			document.mozCancelFullScreen()
		} else {
			console.assert(false)
		}
	};
	THREEx.FullScreen._hasWebkitFullScreen = "webkitCancelFullScreen" in document ? true : false;
	THREEx.FullScreen._hasMozFullScreen = "mozCancelFullScreen" in document ? true : false
} {
	var TWEEN = TWEEN || function() {
		var e, t, n = 60,
			r = false,
			i = [];
		return {
			setFPS: function(e) {
				n = e || 60
			},
			start: function(e) {
				arguments.length != 0 && this.setFPS(e);
				t = setInterval(this.update, 1e3 / n)
			},
			stop: function() {
				clearInterval(t)
			},
			setAutostart: function(e) {
				(r = e) && !t && this.start()
			},
			add: function(e) {
				i.push(e);
				r && !t && this.start()
			},
			getAll: function() {
				return i
			},
			removeAll: function() {
				i = []
			},
			remove: function(t) {
				e = i.indexOf(t);
				e !== -1 && i.splice(e, 1)
			},
			update: function(t) {
				e = 0;
				num_tweens = i.length;
				for (t = t || Date.now(); e < num_tweens;)
					if (i[e].update(t)) e++;
					else {
						i.splice(e, 1);
						num_tweens--
					}
				num_tweens == 0 && r == true && this.stop()
			}
		}
	}();
	TWEEN.Tween = function(e) {
		var t = {},
			n = {},
			r = {},
			i = 1e3,
			s = 0,
			o = null,
			u = TWEEN.Easing.Linear.EaseNone,
			a = null,
			f = null,
			l = null;
		this.to = function(t, n) {
			if (n !== null) i = n;
			for (var s in t)
				if (e[s] !== null) r[s] = t[s];
			return this
		};
		this.start = function(i) {
			TWEEN.add(this);
			o = i ? i + s : Date.now() + s;
			for (var u in r)
				if (e[u] !== null) {
					t[u] = e[u];
					n[u] = r[u] - e[u]
				}
			return this
		};
		this.stop = function() {
			TWEEN.remove(this);
			return this
		};
		this.delay = function(e) {
			s = e;
			return this
		};
		this.easing = function(e) {
			u = e;
			return this
		};
		this.chain = function(e) {
			a = e
		};
		this.onUpdate = function(e) {
			f = e;
			return this
		};
		this.onComplete = function(e) {
			l = e;
			return this
		};
		this.update = function(r) {
			var s, p;
			if (r < o) return true;
			r = (r - o) / i;
			r = r > 1 ? 1 : r;
			p = u(r);
			for (s in n) e[s] = t[s] + n[s] * p;
			f !== null && f.call(e, p);
			if (r == 1) {
				l !== null && l.call(e);
				a !== null && a.start();
				return false
			}
			return true
		}
	};
	TWEEN.Easing = {
		Linear: {},
		Quadratic: {},
		Cubic: {},
		Quartic: {},
		Quintic: {},
		Sinusoidal: {},
		Exponential: {},
		Circular: {},
		Elastic: {},
		Back: {},
		Bounce: {}
	};
	TWEEN.Easing.Linear.EaseNone = function(e) {
		return e
	};
	TWEEN.Easing.Quadratic.EaseIn = function(e) {
		return e * e
	};
	TWEEN.Easing.Quadratic.EaseOut = function(e) {
		return -e * (e - 2)
	};
	TWEEN.Easing.Quadratic.EaseInOut = function(e) {
		if ((e *= 2) < 1) return .5 * e * e;
		return -.5 * (--e * (e - 2) - 1)
	};
	TWEEN.Easing.Cubic.EaseIn = function(e) {
		return e * e * e
	};
	TWEEN.Easing.Cubic.EaseOut = function(e) {
		return --e * e * e + 1
	};
	TWEEN.Easing.Cubic.EaseInOut = function(e) {
		if ((e *= 2) < 1) return .5 * e * e * e;
		return .5 * ((e -= 2) * e * e + 2)
	};
	TWEEN.Easing.Quartic.EaseIn = function(e) {
		return e * e * e * e
	};
	TWEEN.Easing.Quartic.EaseOut = function(e) {
		return -(--e * e * e * e - 1)
	};
	TWEEN.Easing.Quartic.EaseInOut = function(e) {
		if ((e *= 2) < 1) return .5 * e * e * e * e;
		return -.5 * ((e -= 2) * e * e * e - 2)
	};
	TWEEN.Easing.Quintic.EaseIn = function(e) {
		return e * e * e * e * e
	};
	TWEEN.Easing.Quintic.EaseOut = function(e) {
		return (e -= 1) * e * e * e * e + 1
	};
	TWEEN.Easing.Quintic.EaseInOut = function(e) {
		if ((e *= 2) < 1) return .5 * e * e * e * e * e;
		return .5 * ((e -= 2) * e * e * e * e + 2)
	};
	TWEEN.Easing.Sinusoidal.EaseIn = function(e) {
		return -Math.cos(e * Math.PI / 2) + 1
	};
	TWEEN.Easing.Sinusoidal.EaseOut = function(e) {
		return Math.sin(e * Math.PI / 2)
	};
	TWEEN.Easing.Sinusoidal.EaseInOut = function(e) {
		return -.5 * (Math.cos(Math.PI * e) - 1)
	};
	TWEEN.Easing.Exponential.EaseIn = function(e) {
		return e == 0 ? 0 : Math.pow(2, 10 * (e - 1))
	};
	TWEEN.Easing.Exponential.EaseOut = function(e) {
		return e == 1 ? 1 : -Math.pow(2, -10 * e) + 1
	};
	TWEEN.Easing.Exponential.EaseInOut = function(e) {
		if (e == 0) return 0;
		if (e == 1) return 1;
		if ((e *= 2) < 1) return .5 * Math.pow(2, 10 * (e - 1));
		return .5 * (-Math.pow(2, -10 * (e - 1)) + 2)
	};
	TWEEN.Easing.Circular.EaseIn = function(e) {
		return -(Math.sqrt(1 - e * e) - 1)
	};
	TWEEN.Easing.Circular.EaseOut = function(e) {
		return Math.sqrt(1 - --e * e)
	};
	TWEEN.Easing.Circular.EaseInOut = function(e) {
		if ((e /= .5) < 1) return -.5 * (Math.sqrt(1 - e * e) - 1);
		return .5 * (Math.sqrt(1 - (e -= 2) * e) + 1)
	};
	TWEEN.Easing.Elastic.EaseIn = function(e) {
		var t, n = .1,
			r = .4;
		if (e == 0) return 0;
		if (e == 1) return 1;
		r || (r = .3);
		if (!n || n < 1) {
			n = 1;
			t = r / 4
		} else t = r / (2 * Math.PI) * Math.asin(1 / n);
		return -(n * Math.pow(2, 10 * (e -= 1)) * Math.sin((e - t) * 2 * Math.PI / r))
	};
	TWEEN.Easing.Elastic.EaseOut = function(e) {
		var t, n = .1,
			r = .4;
		if (e == 0) return 0;
		if (e == 1) return 1;
		r || (r = .3);
		if (!n || n < 1) {
			n = 1;
			t = r / 4
		} else t = r / (2 * Math.PI) * Math.asin(1 / n);
		return n * Math.pow(2, -10 * e) * Math.sin((e - t) * 2 * Math.PI / r) + 1
	};
	TWEEN.Easing.Elastic.EaseInOut = function(e) {
		var t, n = .1,
			r = .4;
		if (e == 0) return 0;
		if (e == 1) return 1;
		r || (r = .3);
		if (!n || n < 1) {
			n = 1;
			t = r / 4
		} else t = r / (2 * Math.PI) * Math.asin(1 / n); if ((e *= 2) < 1) return -.5 * n * Math.pow(2, 10 * (e -= 1)) * Math.sin((e - t) * 2 * Math.PI / r);
		return n * Math.pow(2, -10 * (e -= 1)) * Math.sin((e - t) * 2 * Math.PI / r) * .5 + 1
	};
	TWEEN.Easing.Back.EaseIn = function(e) {
		return e * e * (2.70158 * e - 1.70158)
	};
	TWEEN.Easing.Back.EaseOut = function(e) {
		return (e -= 1) * e * (2.70158 * e + 1.70158) + 1
	};
	TWEEN.Easing.Back.EaseInOut = function(e) {
		if ((e *= 2) < 1) return .5 * e * e * (3.5949095 * e - 2.5949095);
		return .5 * ((e -= 2) * e * (3.5949095 * e + 2.5949095) + 2)
	};
	TWEEN.Easing.Bounce.EaseIn = function(e) {
		return 1 - TWEEN.Easing.Bounce.EaseOut(1 - e)
	};
	TWEEN.Easing.Bounce.EaseOut = function(e) {
		return (e /= 1) < 1 / 2.75 ? 7.5625 * e * e : e < 2 / 2.75 ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : e < 2.5 / 2.75 ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375
	};
	TWEEN.Easing.Bounce.EaseInOut = function(e) {
		if (e < .5) return TWEEN.Easing.Bounce.EaseIn(e * 2) * .5;
		return TWEEN.Easing.Bounce.EaseOut(e * 2 - 1) * .5 + .5
	}
}